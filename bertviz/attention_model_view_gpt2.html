<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>      
        <div id="bertviz-9e83c77014774ea2b5f675667cab7939" style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;">
            <span style="user-select:none">
                
            </span>
            <div id='vis'></div>
        </div>
    
<script type="text/javascript">
/**
 * @fileoverview Transformer Visualization D3 javascript code.
 *
 * Based on: https://github.com/tensorflow/tensor2tensor/blob/master/tensor2tensor/visualization/attention.js
 *
 * Change log:
 *
 * 02/01/19  Jesse Vig   Initial implementation
 * 12/31/20  Jesse Vig   Support multiple visualizations in single notebook.
 * 01/19/21  Jesse Vig   Support light/dark modes
 * 02/06/21  Jesse Vig   Move require config from separate jupyter notebook step
 * 05/03/21  Jesse Vig   Adjust visualization height dynamically
 * 03/23/22  Daniel SC   Update requirement URLs for d3 and jQuery (source of bug not allowing end result to be displayed on browsers)
 **/

require.config({
  paths: {
      d3: 'https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min',
    jquery: 'https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.0/jquery.min',
  }
});

requirejs(['jquery', 'd3'], function($, d3) {

        const params = {"attention": [{"name": null, "attn": [[[[1.0, 0.0, 0.0, 0.0], [0.9386990666389465, 0.061300959438085556, 0.0, 0.0], [0.8154762983322144, 0.12783433496952057, 0.05668935924768448, 0.0], [0.6848450303077698, 0.1597706824541092, 0.11659108102321625, 0.038793209940195084]], [[1.0, 0.0, 0.0, 0.0], [0.0004088179557584226, 0.9995911717414856, 0.0, 0.0], [0.00405538734048605, 0.005558843724429607, 0.9903857707977295, 0.0], [0.005872634705156088, 0.00941621046513319, 0.003359881229698658, 0.9813512563705444]], [[1.0, 0.0, 0.0, 0.0], [0.8988897204399109, 0.10111028701066971, 0.0, 0.0], [0.6154751181602478, 0.3070519268512726, 0.07747300714254379, 0.0], [0.4963447153568268, 0.2898261845111847, 0.148002490401268, 0.06582660973072052]], [[1.0, 0.0, 0.0, 0.0], [0.26781120896339417, 0.7321888208389282, 0.0, 0.0], [0.19684956967830658, 0.17740345001220703, 0.6257469654083252, 0.0], [0.055355191230773926, 0.009077605791389942, 0.026112157851457596, 0.9094550609588623]], [[1.0, 0.0, 0.0, 0.0], [0.8783911466598511, 0.1216089054942131, 0.0, 0.0], [0.7294161915779114, 0.15237148106098175, 0.11821236461400986, 0.0], [0.6454820036888123, 0.10018995404243469, 0.06108938157558441, 0.19323866069316864]], [[1.0, 0.0, 0.0, 0.0], [0.13609729707241058, 0.863902747631073, 0.0, 0.0], [0.14422282576560974, 0.02482943795621395, 0.8309476971626282, 0.0], [0.06886947900056839, 0.00038394948933273554, 0.0005880817188881338, 0.9301584362983704]], [[1.0, 0.0, 0.0, 0.0], [0.8347172737121582, 0.16528268158435822, 0.0, 0.0], [0.8134347796440125, 0.16262391209602356, 0.023941287770867348, 0.0], [0.6323543190956116, 0.2020726352930069, 0.049605876207351685, 0.11596715450286865]], [[1.0, 0.0, 0.0, 0.0], [0.9673805832862854, 0.032619379460811615, 0.0, 0.0], [0.5056912899017334, 0.3085750639438629, 0.18573366105556488, 0.0], [0.4036475718021393, 0.17038263380527496, 0.3024134337902069, 0.12355638295412064]], [[1.0, 0.0, 0.0, 0.0], [0.8107370734214783, 0.18926295638084412, 0.0, 0.0], [0.13179363310337067, 0.09435887634754181, 0.7738475203514099, 0.0], [0.2725644111633301, 0.23042191565036774, 0.4119819402694702, 0.08503173291683197]], [[1.0, 0.0, 0.0, 0.0], [0.8175715804100037, 0.18242843449115753, 0.0, 0.0], [0.5780487060546875, 0.19336670637130737, 0.22858461737632751, 0.0], [0.4875624179840088, 0.17753055691719055, 0.21724726259708405, 0.11765982210636139]], [[1.0, 0.0, 0.0, 0.0], [0.6669260263442993, 0.3330739736557007, 0.0, 0.0], [0.5709012150764465, 0.13868401944637299, 0.2904147207736969, 0.0], [0.44481632113456726, 0.13260209560394287, 0.13473743200302124, 0.287844181060791]], [[1.0, 0.0, 0.0, 0.0], [0.6917881965637207, 0.3082118034362793, 0.0, 0.0], [0.54864102602005, 0.21843697130680084, 0.23292198777198792, 0.0], [0.5848237872123718, 0.1656769961118698, 0.08835474401712418, 0.16114450991153717]]], [[[1.0, 0.0, 0.0, 0.0], [0.9974104762077332, 0.0025895689614117146, 0.0, 0.0], [0.8742523789405823, 0.09441448748111725, 0.03133314475417137, 0.0], [0.507357656955719, 0.13263900578022003, 0.3226173520088196, 0.0373859629034996]], [[1.0, 0.0, 0.0, 0.0], [0.9443351030349731, 0.055664945393800735, 0.0, 0.0], [0.813620924949646, 0.10736654698848724, 0.07901259511709213, 0.0], [0.6207619309425354, 0.1271166354417801, 0.1800544559955597, 0.07206691801548004]], [[1.0, 0.0, 0.0, 0.0], [0.9811798334121704, 0.018820151686668396, 0.0, 0.0], [0.7717289328575134, 0.034391410648822784, 0.1938796192407608, 0.0], [0.6161508560180664, 0.04137984290719032, 0.18934880197048187, 0.15312054753303528]], [[1.0, 0.0, 0.0, 0.0], [0.5964542031288147, 0.4035457670688629, 0.0, 0.0], [0.556045413017273, 0.217601016163826, 0.22635358572006226, 0.0], [0.5401265621185303, 0.13903097808361053, 0.14026693999767303, 0.18057547509670258]], [[1.0, 0.0, 0.0, 0.0], [0.9224552512168884, 0.0775446966290474, 0.0, 0.0], [0.82497638463974, 0.09550265967845917, 0.07952093333005905, 0.0], [0.7255311608314514, 0.08903462439775467, 0.06963469833135605, 0.11579952389001846]], [[1.0, 0.0, 0.0, 0.0], [0.9569482207298279, 0.04305185005068779, 0.0, 0.0], [0.8812008500099182, 0.04771461710333824, 0.07108456641435623, 0.0], [0.7213462591171265, 0.09610321372747421, 0.10770922154188156, 0.07484129816293716]], [[1.0, 0.0, 0.0, 0.0], [0.9760539531707764, 0.023946037515997887, 0.0, 0.0], [0.7848144173622131, 0.10564027726650238, 0.10954530537128448, 0.0], [0.6648852229118347, 0.12347869575023651, 0.1221461296081543, 0.08949001133441925]], [[1.0, 0.0, 0.0, 0.0], [0.9455268979072571, 0.05447304621338844, 0.0, 0.0], [0.7956106066703796, 0.1285388469696045, 0.07585044205188751, 0.0], [0.7267206311225891, 0.12868694961071014, 0.0806252658367157, 0.0639672577381134]], [[1.0, 0.0, 0.0, 0.0], [0.8889747858047485, 0.11102523654699326, 0.0, 0.0], [0.7811747193336487, 0.08867131918668747, 0.13015392422676086, 0.0], [0.7282044887542725, 0.07868865877389908, 0.11829928308725357, 0.0748075470328331]], [[1.0, 0.0, 0.0, 0.0], [0.9835500717163086, 0.016449911519885063, 0.0, 0.0], [0.8598909974098206, 0.04173654317855835, 0.09837247431278229, 0.0], [0.8182245492935181, 0.03585519641637802, 0.11249307543039322, 0.033427219837903976]], [[1.0, 0.0, 0.0, 0.0], [0.00032169747282750905, 0.999678373336792, 0.0, 0.0], [0.0006908061914145947, 0.5951332449913025, 0.4041759967803955, 0.0], [0.0007917824550531805, 0.3606407046318054, 0.2596016526222229, 0.378965824842453]], [[1.0, 0.0, 0.0, 0.0], [0.7610664963722229, 0.2389335185289383, 0.0, 0.0], [0.21693289279937744, 0.0014776987954974174, 0.7815893888473511, 0.0], [0.38026267290115356, 0.007033858448266983, 0.003747573820874095, 0.6089559197425842]]], [[[1.0, 0.0, 0.0, 0.0], [0.8777437210083008, 0.12225628644227982, 0.0, 0.0], [0.5988823771476746, 0.34572702646255493, 0.05539068207144737, 0.0], [0.5485967993736267, 0.3528253734111786, 0.06150837242603302, 0.03706948831677437]], [[1.0, 0.0, 0.0, 0.0], [0.9846766591072083, 0.015323302708566189, 0.0, 0.0], [0.9292697310447693, 0.05442306771874428, 0.01630726270377636, 0.0], [0.949051022529602, 0.025398464873433113, 0.014029561541974545, 0.01152098923921585]], [[1.0, 0.0, 0.0, 0.0], [0.9990108013153076, 0.0009891879744827747, 0.0, 0.0], [0.44437476992607117, 0.5228517055511475, 0.0327734649181366, 0.0], [0.3761645257472992, 0.4615734815597534, 0.15918758511543274, 0.003074448788538575]], [[1.0, 0.0, 0.0, 0.0], [0.9900113940238953, 0.009988595731556416, 0.0, 0.0], [0.7836636304855347, 0.11458471417427063, 0.1017516553401947, 0.0], [0.5403807163238525, 0.09871184080839157, 0.34999293088912964, 0.010914448648691177]], [[1.0, 0.0, 0.0, 0.0], [0.9763596653938293, 0.023640276864171028, 0.0, 0.0], [0.7607811689376831, 0.16980114579200745, 0.06941767036914825, 0.0], [0.5048671960830688, 0.37121960520744324, 0.1156923919916153, 0.008220830000936985]], [[1.0, 0.0, 0.0, 0.0], [0.9743636846542358, 0.025636261329054832, 0.0, 0.0], [0.7166638970375061, 0.21827980875968933, 0.06505639106035233, 0.0], [0.5626057386398315, 0.24958252906799316, 0.11356394737958908, 0.07424774020910263]], [[1.0, 0.0, 0.0, 0.0], [0.9792769551277161, 0.020723039284348488, 0.0, 0.0], [0.9174785017967224, 0.03259960934519768, 0.049921855330467224, 0.0], [0.8691339492797852, 0.02953912690281868, 0.07114680856466293, 0.030180148780345917]], [[1.0, 0.0, 0.0, 0.0], [0.8547745943069458, 0.14522548019886017, 0.0, 0.0], [0.6579469442367554, 0.12219787389039993, 0.21985509991645813, 0.0], [0.5189388990402222, 0.061927203088998795, 0.11605015397071838, 0.30308374762535095]], [[1.0, 0.0, 0.0, 0.0], [0.9882072806358337, 0.01179276593029499, 0.0, 0.0], [0.7308551073074341, 0.24959583580493927, 0.019549062475562096, 0.0], [0.6944138407707214, 0.22592496871948242, 0.06695352494716644, 0.012707757763564587]], [[1.0, 0.0, 0.0, 0.0], [0.9850941896438599, 0.014905845746397972, 0.0, 0.0], [0.7803608179092407, 0.18376260995864868, 0.03587659075856209, 0.0], [0.5902022123336792, 0.16575652360916138, 0.11212771385908127, 0.13191351294517517]], [[1.0, 0.0, 0.0, 0.0], [0.9426629543304443, 0.05733703821897507, 0.0, 0.0], [0.8354954123497009, 0.08382712304592133, 0.08067747950553894, 0.0], [0.6779214143753052, 0.06342263519763947, 0.06287086755037308, 0.1957850605249405]], [[1.0, 0.0, 0.0, 0.0], [0.9698477387428284, 0.030152220278978348, 0.0, 0.0], [0.9114020466804504, 0.03938926011323929, 0.04920866712927818, 0.0], [0.8461784720420837, 0.03164617344737053, 0.03891567885875702, 0.08325976133346558]]], [[[1.0, 0.0, 0.0, 0.0], [0.9934425354003906, 0.006557411514222622, 0.0, 0.0], [0.9865400195121765, 0.0003556347801350057, 0.013104327023029327, 0.0], [0.9819018244743347, 0.00029128711321391165, 0.001010638428851962, 0.01679622009396553]], [[1.0, 0.0, 0.0, 0.0], [0.9743368625640869, 0.0256631039083004, 0.0, 0.0], [0.8675225973129272, 0.04879573732614517, 0.0836816132068634, 0.0], [0.769124448299408, 0.06742677837610245, 0.12627796828746796, 0.03717075288295746]], [[1.0, 0.0, 0.0, 0.0], [0.9132490158081055, 0.08675090968608856, 0.0, 0.0], [0.1305047869682312, 0.7643388509750366, 0.10515644401311874, 0.0], [0.03268545866012573, 0.2975099980831146, 0.6668018102645874, 0.003002762096002698]], [[1.0, 0.0, 0.0, 0.0], [0.9675267934799194, 0.03247322887182236, 0.0, 0.0], [0.20501264929771423, 0.7644042372703552, 0.030583159998059273, 0.0], [0.3564446270465851, 0.456147700548172, 0.18385004997253418, 0.003557646879926324]], [[1.0, 0.0, 0.0, 0.0], [0.9995332956314087, 0.00046671880409121513, 0.0, 0.0], [0.9811180233955383, 0.005223915446549654, 0.013658045791089535, 0.0], [0.9865487217903137, 0.0035811427515000105, 0.008508994244039059, 0.0013611215399578214]], [[1.0, 0.0, 0.0, 0.0], [0.9925814867019653, 0.007418475113809109, 0.0, 0.0], [0.9046229124069214, 0.04340042173862457, 0.05197671800851822, 0.0], [0.8455096483230591, 0.08458296209573746, 0.04902404919266701, 0.020883450284600258]], [[1.0, 0.0, 0.0, 0.0], [0.951549768447876, 0.04845014587044716, 0.0, 0.0], [0.371051162481308, 0.4936000108718872, 0.1353488564491272, 0.0], [0.2800333797931671, 0.35663995146751404, 0.2943766415119171, 0.06894995272159576]], [[1.0, 0.0, 0.0, 0.0], [0.9788253903388977, 0.021174630150198936, 0.0, 0.0], [0.5259523391723633, 0.3666198253631592, 0.10742782801389694, 0.0], [0.24780124425888062, 0.3971612751483917, 0.29692593216896057, 0.05811157822608948]], [[1.0, 0.0, 0.0, 0.0], [0.9607478976249695, 0.0392521433532238, 0.0, 0.0], [0.3668893277645111, 0.6170048117637634, 0.01610594242811203, 0.0], [0.27501991391181946, 0.6715264916419983, 0.04020080342888832, 0.01325280498713255]], [[1.0, 0.0, 0.0, 0.0], [0.8876343369483948, 0.11236560344696045, 0.0, 0.0], [0.4404723644256592, 0.5188531875610352, 0.04067445173859596, 0.0], [0.16635125875473022, 0.7666470408439636, 0.05007048323750496, 0.016931286081671715]], [[1.0, 0.0, 0.0, 0.0], [0.994976282119751, 0.00502379285171628, 0.0, 0.0], [0.9010947346687317, 0.020267922431230545, 0.07863742858171463, 0.0], [0.8797561526298523, 0.011794530786573887, 0.020212076604366302, 0.08823718130588531]], [[1.0, 0.0, 0.0, 0.0], [0.9816916584968567, 0.018308322876691818, 0.0, 0.0], [0.5607301592826843, 0.3647148311138153, 0.07455500960350037, 0.0], [0.29198333621025085, 0.5104015469551086, 0.16998480260372162, 0.027630332857370377]]], [[[1.0, 0.0, 0.0, 0.0], [0.9456270337104797, 0.05437295511364937, 0.0, 0.0], [0.10138240456581116, 0.8650736808776855, 0.03354392200708389, 0.0], [0.16850735247135162, 0.6010857224464417, 0.21984510123729706, 0.010561839677393436]], [[1.0, 0.0, 0.0, 0.0], [0.9804814457893372, 0.019518550485372543, 0.0, 0.0], [0.5541265606880188, 0.40906739234924316, 0.036805957555770874, 0.0], [0.6225647330284119, 0.21242354810237885, 0.14110197126865387, 0.02390974387526512]], [[1.0, 0.0, 0.0, 0.0], [0.9821803569793701, 0.017819629982113838, 0.0, 0.0], [0.9311659932136536, 0.045474160462617874, 0.023359864950180054, 0.0], [0.9538038969039917, 0.016862165182828903, 0.019785597920417786, 0.009548344649374485]], [[1.0, 0.0, 0.0, 0.0], [0.9446542263031006, 0.05534574016928673, 0.0, 0.0], [0.7577371001243591, 0.1763465255498886, 0.06591632962226868, 0.0], [0.4732452929019928, 0.21535323560237885, 0.2761582136154175, 0.03524328023195267]], [[1.0, 0.0, 0.0, 0.0], [0.9558166265487671, 0.0441834032535553, 0.0, 0.0], [0.9118539094924927, 0.06744291633367538, 0.020703203976154327, 0.0], [0.9482555389404297, 0.0150406863540411, 0.019270574674010277, 0.017433328554034233]], [[1.0, 0.0, 0.0, 0.0], [0.9457424879074097, 0.05425754934549332, 0.0, 0.0], [0.7204064726829529, 0.2078121155500412, 0.07178150117397308, 0.0], [0.553848385810852, 0.21665343642234802, 0.1856357455253601, 0.04386242851614952]], [[1.0, 0.0, 0.0, 0.0], [0.9527818560600281, 0.047218166291713715, 0.0, 0.0], [0.862822413444519, 0.0941883772611618, 0.042989250272512436, 0.0], [0.7356595396995544, 0.11942270398139954, 0.10957179218530655, 0.035345952957868576]], [[1.0, 0.0, 0.0, 0.0], [0.9895219206809998, 0.010478000156581402, 0.0, 0.0], [0.5952821969985962, 0.04355480521917343, 0.3611629903316498, 0.0], [0.5443375706672668, 0.02792736329138279, 0.12166851758956909, 0.3060666024684906]], [[1.0, 0.0, 0.0, 0.0], [0.9983909130096436, 0.001609062310308218, 0.0, 0.0], [0.9702750444412231, 0.020298831164836884, 0.009426100179553032, 0.0], [0.9740654826164246, 0.005195136647671461, 0.00710366340354085, 0.013635833747684956]], [[1.0, 0.0, 0.0, 0.0], [0.9544646143913269, 0.045535434037446976, 0.0, 0.0], [0.9005610346794128, 0.07555318623781204, 0.023885833099484444, 0.0], [0.6340034008026123, 0.11728543788194656, 0.1907411515712738, 0.05796998739242554]], [[1.0, 0.0, 0.0, 0.0], [0.9931398034095764, 0.006860141176730394, 0.0, 0.0], [0.9827604293823242, 0.010718005709350109, 0.006521613337099552, 0.0], [0.9867382049560547, 0.008362957276403904, 0.002424329984933138, 0.002474547829478979]], [[1.0, 0.0, 0.0, 0.0], [0.9999589920043945, 4.100505611859262e-05, 0.0, 0.0], [2.1167596564453106e-09, 0.9999597072601318, 4.027165050501935e-05, 0.0], [7.296709764181841e-11, 1.9408530338438368e-09, 0.9999985694885254, 1.3913225984651945e-06]]], [[[1.0, 0.0, 0.0, 0.0], [0.9962033629417419, 0.0037966156378388405, 0.0, 0.0], [0.9842968583106995, 0.0016433977289125323, 0.014059669338166714, 0.0], [0.9883202314376831, 0.001260109362192452, 0.008988087996840477, 0.0014315539738163352]], [[1.0, 0.0, 0.0, 0.0], [0.9986768364906311, 0.0013230948243290186, 0.0, 0.0], [0.995591402053833, 2.1617710444843397e-05, 0.004387076012790203, 0.0], [0.9968061447143555, 9.023295206134208e-06, 0.00025128384004347026, 0.002933504292741418]], [[1.0, 0.0, 0.0, 0.0], [0.7163896560668945, 0.28361034393310547, 0.0, 0.0], [0.6065196990966797, 0.38076040148735046, 0.012719940394163132, 0.0], [0.4247047007083893, 0.44696244597435, 0.1107916310429573, 0.01754121668636799]], [[1.0, 0.0, 0.0, 0.0], [0.9688196182250977, 0.031180329620838165, 0.0, 0.0], [0.7945992946624756, 0.18035992980003357, 0.025040794163942337, 0.0], [0.7301396727561951, 0.16359831392765045, 0.047983068972826004, 0.05827898159623146]], [[1.0, 0.0, 0.0, 0.0], [0.779181957244873, 0.22081805765628815, 0.0, 0.0], [0.3038197159767151, 0.6817625761032104, 0.014417625032365322, 0.0], [0.4583328068256378, 0.3163487911224365, 0.047658804804086685, 0.17765960097312927]], [[1.0, 0.0, 0.0, 0.0], [0.9733663201332092, 0.026633717119693756, 0.0, 0.0], [0.9832007884979248, 0.004912443924695253, 0.011886732652783394, 0.0], [0.9919832348823547, 0.0025306979659944773, 0.005043887998908758, 0.0004421924240887165]], [[1.0, 0.0, 0.0, 0.0], [0.8306384682655334, 0.16936151683330536, 0.0, 0.0], [0.2542227804660797, 0.7054166793823242, 0.04036049172282219, 0.0], [0.3181505799293518, 0.30745986104011536, 0.35357797145843506, 0.020811552181839943]], [[1.0, 0.0, 0.0, 0.0], [0.8333271741867065, 0.16667279601097107, 0.0, 0.0], [0.7151976823806763, 0.266999751329422, 0.017802558839321136, 0.0], [0.510219931602478, 0.4042413830757141, 0.06920824199914932, 0.016330400481820107]], [[1.0, 0.0, 0.0, 0.0], [0.9659283757209778, 0.034071583300828934, 0.0, 0.0], [0.9231240153312683, 0.04189451411366463, 0.034981418401002884, 0.0], [0.8273051381111145, 0.05188829451799393, 0.0961170643568039, 0.024689441546797752]], [[1.0, 0.0, 0.0, 0.0], [0.9987831711769104, 0.0012168376706540585, 0.0, 0.0], [0.980158805847168, 0.010732371360063553, 0.009108783677220345, 0.0], [0.9938849806785583, 0.0023680413141846657, 0.0026110506150871515, 0.0011358421761542559]], [[1.0, 0.0, 0.0, 0.0], [0.9949577450752258, 0.005042257718741894, 0.0, 0.0], [0.975950300693512, 0.01238936372101307, 0.011660300195217133, 0.0], [0.9841645359992981, 0.0036597491707652807, 0.007766601629555225, 0.004409154411405325]], [[1.0, 0.0, 0.0, 0.0], [0.9851452112197876, 0.014854790642857552, 0.0, 0.0], [0.8303000926971436, 0.008477164432406425, 0.1612226814031601, 0.0], [0.8953334093093872, 0.021161740645766258, 0.032138749957084656, 0.05136607959866524]]], [[[1.0, 0.0, 0.0, 0.0], [0.9686926603317261, 0.031307317316532135, 0.0, 0.0], [0.7896577715873718, 0.1577855944633484, 0.0525566041469574, 0.0], [0.7174322605133057, 0.1421930491924286, 0.08254401385784149, 0.05783069133758545]], [[1.0, 0.0, 0.0, 0.0], [0.965919017791748, 0.03408098593354225, 0.0, 0.0], [0.9099407196044922, 0.08437921106815338, 0.005680139642208815, 0.0], [0.9286556839942932, 0.05655685067176819, 0.00780187314376235, 0.006985512096434832]], [[1.0, 0.0, 0.0, 0.0], [0.9913275837898254, 0.0086723817512393, 0.0, 0.0], [0.9770335555076599, 0.007762562949210405, 0.015203826129436493, 0.0], [0.9675631523132324, 0.009585700929164886, 0.013097590766847134, 0.009753648191690445]], [[1.0, 0.0, 0.0, 0.0], [0.9899054169654846, 0.010094597935676575, 0.0, 0.0], [0.9820333123207092, 0.014128822833299637, 0.003837809432297945, 0.0], [0.9646238088607788, 0.014664663933217525, 0.003418794134631753, 0.017292624339461327]], [[1.0, 0.0, 0.0, 0.0], [0.9868577718734741, 0.01314218807965517, 0.0, 0.0], [0.9248044490814209, 0.033421117812395096, 0.041774436831474304, 0.0], [0.8940715789794922, 0.02904936857521534, 0.012493700720369816, 0.06438536942005157]], [[1.0, 0.0, 0.0, 0.0], [0.9452899694442749, 0.05471005663275719, 0.0, 0.0], [0.8996859788894653, 0.0680723786354065, 0.03224168345332146, 0.0], [0.8663982152938843, 0.037268396466970444, 0.01863349974155426, 0.07769980281591415]], [[1.0, 0.0, 0.0, 0.0], [0.9880596995353699, 0.011940322816371918, 0.0, 0.0], [0.9389775991439819, 0.004000138025730848, 0.0570223294198513, 0.0], [0.9692215919494629, 0.008506412617862225, 0.01037130132317543, 0.01190069317817688]], [[1.0, 0.0, 0.0, 0.0], [0.9841916561126709, 0.0158083438873291, 0.0, 0.0], [0.9381868243217468, 0.03972439840435982, 0.02208869904279709, 0.0], [0.9378873705863953, 0.012357835657894611, 0.023546654731035233, 0.026208236813545227]], [[1.0, 0.0, 0.0, 0.0], [0.9501339197158813, 0.04986611008644104, 0.0, 0.0], [0.6383427977561951, 0.3556228280067444, 0.0060343435034155846, 0.0], [0.3149145841598511, 0.36217254400253296, 0.24434049427509308, 0.0785723328590393]], [[1.0, 0.0, 0.0, 0.0], [0.9941297769546509, 0.005870290100574493, 0.0, 0.0], [0.9932490587234497, 0.0001981214591069147, 0.006552911829203367, 0.0], [0.9974476099014282, 0.00034304725704714656, 0.00030853209318593144, 0.0019008012022823095]], [[1.0, 0.0, 0.0, 0.0], [0.9892164468765259, 0.010783570818603039, 0.0, 0.0], [0.9873945713043213, 0.009279372170567513, 0.0033260826021432877, 0.0], [0.972877025604248, 0.010328023694455624, 0.005593191832304001, 0.011201729066669941]], [[1.0, 0.0, 0.0, 0.0], [0.9299083352088928, 0.07009174674749374, 0.0, 0.0], [0.5345919132232666, 0.42335209250450134, 0.04205602407455444, 0.0], [0.5218877792358398, 0.15737886726856232, 0.22668243944644928, 0.09405085444450378]]], [[[1.0, 0.0, 0.0, 0.0], [0.8152306079864502, 0.1847693920135498, 0.0, 0.0], [0.1516718715429306, 0.833308219909668, 0.015019959770143032, 0.0], [0.49499255418777466, 0.2698947787284851, 0.16514304280281067, 0.06996963918209076]], [[1.0, 0.0, 0.0, 0.0], [0.9965517520904541, 0.0034482446499168873, 0.0, 0.0], [0.9903267025947571, 0.0029440708458423615, 0.006729251705110073, 0.0], [0.976673424243927, 0.003898720722645521, 0.004056133795529604, 0.015371722169220448]], [[1.0, 0.0, 0.0, 0.0], [0.9990725517272949, 0.0009273977484554052, 0.0, 0.0], [0.9982885718345642, 5.60950102226343e-05, 0.0016553562600165606, 0.0], [0.9987342953681946, 0.0002059258840745315, 0.00037062805495224893, 0.0006890848162584007]], [[1.0, 0.0, 0.0, 0.0], [0.9924098253250122, 0.007590171881020069, 0.0, 0.0], [0.9121126532554626, 0.05852287635207176, 0.029364431276917458, 0.0], [0.8866461515426636, 0.02146276645362377, 0.045157935470342636, 0.04673315957188606]], [[1.0, 0.0, 0.0, 0.0], [0.9936866164207458, 0.006313389167189598, 0.0, 0.0], [0.9788262844085693, 0.01952739991247654, 0.0016462651547044516, 0.0], [0.6776542067527771, 0.26524707674980164, 0.026424018666148186, 0.03067469410598278]], [[1.0, 0.0, 0.0, 0.0], [0.9880113005638123, 0.011988743208348751, 0.0, 0.0], [0.8073614239692688, 0.17933447659015656, 0.013304171152412891, 0.0], [0.7785122394561768, 0.10176698118448257, 0.050369784235954285, 0.06935103237628937]], [[1.0, 0.0, 0.0, 0.0], [0.9928534626960754, 0.007146543823182583, 0.0, 0.0], [0.9550600051879883, 0.0375756099820137, 0.007364459335803986, 0.0], [0.9515448212623596, 0.01113679725676775, 0.006475043948739767, 0.030843203887343407]], [[1.0, 0.0, 0.0, 0.0], [0.996581494808197, 0.0034185785334557295, 0.0, 0.0], [0.9929023385047913, 0.0030998338479548693, 0.003997880965471268, 0.0], [0.9910842180252075, 0.001655424595810473, 0.00123500544577837, 0.006025394424796104]], [[1.0, 0.0, 0.0, 0.0], [0.9728560447692871, 0.02714393474161625, 0.0, 0.0], [0.49232715368270874, 0.4648086428642273, 0.04286423698067665, 0.0], [0.6295591592788696, 0.08698202669620514, 0.20048974454402924, 0.0829690620303154]], [[1.0, 0.0, 0.0, 0.0], [0.9845507740974426, 0.015449251048266888, 0.0, 0.0], [0.8769374489784241, 0.10896755009889603, 0.014095025137066841, 0.0], [0.8991056680679321, 0.03740262985229492, 0.03791748732328415, 0.02557418681681156]], [[1.0, 0.0, 0.0, 0.0], [0.9990171194076538, 0.0009828259935602546, 0.0, 0.0], [0.987930178642273, 0.0007154862978495657, 0.011354356072843075, 0.0], [0.9956771731376648, 0.0016567996935918927, 0.0006519135204143822, 0.002014072611927986]], [[1.0, 0.0, 0.0, 0.0], [0.9978266358375549, 0.002173357643187046, 0.0, 0.0], [0.9969369173049927, 0.0019075709860771894, 0.001155502861365676, 0.0], [0.9801771640777588, 0.015518316067755222, 0.0029318577144294977, 0.0013725846074521542]]], [[[1.0, 0.0, 0.0, 0.0], [0.9641653895378113, 0.03583463653922081, 0.0, 0.0], [0.9267670512199402, 0.030515087768435478, 0.042717743664979935, 0.0], [0.9287298321723938, 0.014672821387648582, 0.005424496252089739, 0.05117287486791611]], [[1.0, 0.0, 0.0, 0.0], [0.9681812524795532, 0.031818728893995285, 0.0, 0.0], [0.9710885882377625, 0.009570722468197346, 0.019340762868523598, 0.0], [0.92911297082901, 0.04387730732560158, 0.005058508366346359, 0.021951153874397278]], [[1.0, 0.0, 0.0, 0.0], [0.9805691242218018, 0.01943090744316578, 0.0, 0.0], [0.950011134147644, 0.028662800788879395, 0.021325984969735146, 0.0], [0.7468706965446472, 0.11401107907295227, 0.05302668735384941, 0.08609165996313095]], [[1.0, 0.0, 0.0, 0.0], [0.9052550792694092, 0.09474489092826843, 0.0, 0.0], [0.9708861708641052, 0.012041798792779446, 0.017072007060050964, 0.0], [0.9868795275688171, 0.007712827064096928, 0.003937221597880125, 0.0014704845380038023]], [[1.0, 0.0, 0.0, 0.0], [0.976440966129303, 0.023559115827083588, 0.0, 0.0], [0.5788701176643372, 0.39372190833091736, 0.02740800753235817, 0.0], [0.642951488494873, 0.16725262999534607, 0.07466473430395126, 0.11513117700815201]], [[1.0, 0.0, 0.0, 0.0], [0.9579542279243469, 0.04204577952623367, 0.0, 0.0], [0.8228423595428467, 0.15856002271175385, 0.018597567453980446, 0.0], [0.7481485605239868, 0.14154241979122162, 0.05527002736926079, 0.05503902584314346]], [[1.0, 0.0, 0.0, 0.0], [0.9709784388542175, 0.02902161329984665, 0.0, 0.0], [0.9457347989082336, 0.023699982091784477, 0.03056528978049755, 0.0], [0.9576695561408997, 0.0068832202814519405, 0.01847112365067005, 0.01697608456015587]], [[1.0, 0.0, 0.0, 0.0], [0.8202493190765381, 0.17975062131881714, 0.0, 0.0], [0.1268797069787979, 0.852415144443512, 0.020705122500658035, 0.0], [0.6484611630439758, 0.2183963656425476, 0.08478964865207672, 0.04835275933146477]], [[1.0, 0.0, 0.0, 0.0], [0.9797539114952087, 0.02024609036743641, 0.0, 0.0], [0.866890013217926, 0.06186733394861221, 0.071242555975914, 0.0], [0.9428103566169739, 0.007891419343650341, 0.03408453240990639, 0.01521374098956585]], [[1.0, 0.0, 0.0, 0.0], [0.9916059970855713, 0.008394032716751099, 0.0, 0.0], [0.9695702195167542, 0.00943637266755104, 0.020993417128920555, 0.0], [0.9689549207687378, 0.0036615014541894197, 0.011341612786054611, 0.0160419512540102]], [[1.0, 0.0, 0.0, 0.0], [0.9582428932189941, 0.04175712540745735, 0.0, 0.0], [0.901043713092804, 0.03691595047712326, 0.062040288001298904, 0.0], [0.9577464461326599, 0.010657505132257938, 0.018132023513317108, 0.013463936746120453]], [[1.0, 0.0, 0.0, 0.0], [0.9969320297241211, 0.003067924175411463, 0.0, 0.0], [0.9918131828308105, 0.004132367670536041, 0.004054508171975613, 0.0], [0.9890053868293762, 0.0021931633818894625, 0.005232121795415878, 0.0035694334656000137]]], [[[1.0, 0.0, 0.0, 0.0], [0.9969555139541626, 0.0030444886069744825, 0.0, 0.0], [0.9851868748664856, 0.007513352204114199, 0.007299788761883974, 0.0], [0.9798617362976074, 0.0053931032307446, 0.003398307366296649, 0.011346948333084583]], [[1.0, 0.0, 0.0, 0.0], [0.9674856066703796, 0.03251439332962036, 0.0, 0.0], [0.9664750099182129, 0.013661845587193966, 0.019863173365592957, 0.0], [0.9807192087173462, 0.007637174800038338, 0.006702091544866562, 0.004941482562571764]], [[1.0, 0.0, 0.0, 0.0], [0.9890398979187012, 0.010960083454847336, 0.0, 0.0], [0.9830260872840881, 0.005443778354674578, 0.011530173942446709, 0.0], [0.9844696521759033, 0.004001241642981768, 0.002076371107250452, 0.009452666155993938]], [[1.0, 0.0, 0.0, 0.0], [0.968173086643219, 0.03182695060968399, 0.0, 0.0], [0.8129364848136902, 0.1795225739479065, 0.007540897931903601, 0.0], [0.6591830849647522, 0.09190749377012253, 0.11609543114900589, 0.13281407952308655]], [[1.0, 0.0, 0.0, 0.0], [0.9961091876029968, 0.003890847321599722, 0.0, 0.0], [0.9973794221878052, 0.0008493540808558464, 0.001771225011907518, 0.0], [0.9633728861808777, 0.015612751245498657, 0.006984299048781395, 0.014030038379132748]], [[1.0, 0.0, 0.0, 0.0], [0.984983503818512, 0.015016533434391022, 0.0, 0.0], [0.979132354259491, 0.010871018283069134, 0.009996596723794937, 0.0], [0.9027385711669922, 0.011948888190090656, 0.01002631988376379, 0.0752861499786377]], [[1.0, 0.0, 0.0, 0.0], [0.9877049922943115, 0.012294982559978962, 0.0, 0.0], [0.9932931661605835, 0.00501320231705904, 0.00169359368737787, 0.0], [0.9971020817756653, 0.0010363372275605798, 0.0004825495125260204, 0.0013789866352453828]], [[1.0, 0.0, 0.0, 0.0], [0.9850203990936279, 0.014979599043726921, 0.0, 0.0], [0.9828040599822998, 0.01393198873847723, 0.003263913793489337, 0.0], [0.9483480453491211, 0.012949035502970219, 0.008173080161213875, 0.030529823154211044]], [[1.0, 0.0, 0.0, 0.0], [0.9983519315719604, 0.001648136181756854, 0.0, 0.0], [0.9883583188056946, 0.005952488165348768, 0.005689258221536875, 0.0], [0.9730231761932373, 0.011553458869457245, 0.005111686419695616, 0.010311740450561047]], [[1.0, 0.0, 0.0, 0.0], [0.9361947178840637, 0.06380531936883926, 0.0, 0.0], [0.9964156150817871, 0.003257772885262966, 0.0003266428830102086, 0.0], [0.9972208738327026, 0.0011688405647873878, 0.00013327831402420998, 0.001477051293477416]], [[1.0, 0.0, 0.0, 0.0], [0.9690857529640198, 0.030914193019270897, 0.0, 0.0], [0.4394569993019104, 0.5364719033241272, 0.02407115325331688, 0.0], [0.5689855217933655, 0.09534905850887299, 0.139018252491951, 0.1966472715139389]], [[1.0, 0.0, 0.0, 0.0], [0.9965671300888062, 0.003432789584621787, 0.0, 0.0], [0.9914755821228027, 0.003278584685176611, 0.0052459281869232655, 0.0], [0.9846804738044739, 0.005588242318481207, 0.006543194409459829, 0.0031881548929959536]]], [[[1.0, 0.0, 0.0, 0.0], [0.9831099510192871, 0.01689007319509983, 0.0, 0.0], [0.9813851118087769, 0.006740691140294075, 0.011874103918671608, 0.0], [0.9927008152008057, 0.002953227609395981, 0.0024009020999073982, 0.0019450016552582383]], [[1.0, 0.0, 0.0, 0.0], [0.9638515114784241, 0.03614842891693115, 0.0, 0.0], [0.9886592030525208, 0.001487939152866602, 0.009852932766079903, 0.0], [0.9851754307746887, 0.009167972952127457, 0.00093945546541363, 0.004717167001217604]], [[1.0, 0.0, 0.0, 0.0], [0.9924346208572388, 0.007565424777567387, 0.0, 0.0], [0.9907344579696655, 0.0028242620173841715, 0.006441371515393257, 0.0], [0.9539067149162292, 0.010534192435443401, 0.02473657950758934, 0.010822504758834839]], [[1.0, 0.0, 0.0, 0.0], [0.9820282459259033, 0.017971720546483994, 0.0, 0.0], [0.9846252202987671, 0.009556656703352928, 0.00581810949370265, 0.0], [0.9603148102760315, 0.008456315845251083, 0.015347563661634922, 0.015881381928920746]], [[1.0, 0.0, 0.0, 0.0], [0.8473353981971741, 0.15266457200050354, 0.0, 0.0], [0.8800426721572876, 0.06436359137296677, 0.05559370666742325, 0.0], [0.8848745226860046, 0.022276705130934715, 0.059136759489774704, 0.03371203690767288]], [[1.0, 0.0, 0.0, 0.0], [0.9953528642654419, 0.004647143185138702, 0.0, 0.0], [0.9864563941955566, 0.011872557923197746, 0.0016710774507373571, 0.0], [0.7894346117973328, 0.07586614787578583, 0.05390988662838936, 0.08078934997320175]], [[1.0, 0.0, 0.0, 0.0], [0.9870057106018066, 0.012994240038096905, 0.0, 0.0], [0.9848612546920776, 0.005357534624636173, 0.00978116225451231, 0.0], [0.9915668368339539, 0.0022501356434077024, 0.0017708629602566361, 0.004412251524627209]], [[1.0, 0.0, 0.0, 0.0], [0.9763461351394653, 0.023653898388147354, 0.0, 0.0], [0.978955864906311, 0.009210016578435898, 0.011834170669317245, 0.0], [0.9187737107276917, 0.010127253830432892, 0.010750693269073963, 0.06034841760993004]], [[1.0, 0.0, 0.0, 0.0], [0.9702295064926147, 0.029770484194159508, 0.0, 0.0], [0.9917020201683044, 0.006064123939722776, 0.0022338619455695152, 0.0], [0.9723405838012695, 0.00421936484053731, 0.012967241927981377, 0.010472939349710941]], [[1.0, 0.0, 0.0, 0.0], [0.9474547505378723, 0.05254528298974037, 0.0, 0.0], [0.7892311811447144, 0.19919045269489288, 0.011578366160392761, 0.0], [0.5195817351341248, 0.16073419153690338, 0.12157513946294785, 0.19810879230499268]], [[1.0, 0.0, 0.0, 0.0], [0.995196521282196, 0.0048034824430942535, 0.0, 0.0], [0.9895666837692261, 0.004342013970017433, 0.006091330200433731, 0.0], [0.9913172721862793, 0.0016358302673324943, 0.005122620612382889, 0.0019242172129452229]], [[1.0, 0.0, 0.0, 0.0], [0.984255850315094, 0.015744119882583618, 0.0, 0.0], [0.939336359500885, 0.049912188202142715, 0.010751420632004738, 0.0], [0.9289861917495728, 0.0039323726668953896, 0.05194557458162308, 0.015135815367102623]]], [[[1.0, 0.0, 0.0, 0.0], [0.8114467263221741, 0.1885533332824707, 0.0, 0.0], [0.7201673984527588, 0.13667692244052887, 0.14315564930438995, 0.0], [0.22247260808944702, 0.1560344099998474, 0.2920854687690735, 0.3294075131416321]], [[1.0, 0.0, 0.0, 0.0], [0.961300253868103, 0.038699761033058167, 0.0, 0.0], [0.9510312080383301, 0.02735193260014057, 0.021616868674755096, 0.0], [0.9024365544319153, 0.03481404855847359, 0.05083572119474411, 0.011913684196770191]], [[1.0, 0.0, 0.0, 0.0], [0.9698240756988525, 0.030175942927598953, 0.0, 0.0], [0.9727200269699097, 0.018764641135931015, 0.008515366353094578, 0.0], [0.9281275272369385, 0.04201595485210419, 0.017370058223605156, 0.012486468069255352]], [[1.0, 0.0, 0.0, 0.0], [0.809208333492279, 0.19079171121120453, 0.0, 0.0], [0.5442797541618347, 0.35251691937446594, 0.10320333391427994, 0.0], [0.4338865578174591, 0.12048709392547607, 0.3271926939487457, 0.11843376606702805]], [[1.0, 0.0, 0.0, 0.0], [0.9318721890449524, 0.06812779605388641, 0.0, 0.0], [0.9051650166511536, 0.07473728060722351, 0.020097624510526657, 0.0], [0.9208687543869019, 0.024089708924293518, 0.035876765847206116, 0.01916467770934105]], [[1.0, 0.0, 0.0, 0.0], [0.9717282056808472, 0.02827182412147522, 0.0, 0.0], [0.9724358320236206, 0.019023481756448746, 0.008540664799511433, 0.0], [0.9605212807655334, 0.014990556985139847, 0.011638928204774857, 0.012849321588873863]], [[1.0, 0.0, 0.0, 0.0], [0.9798970818519592, 0.020102854818105698, 0.0, 0.0], [0.9890092015266418, 0.006618392188102007, 0.0043723504059016705, 0.0], [0.9625375270843506, 0.018214106559753418, 0.009453018195927143, 0.009795286692678928]], [[1.0, 0.0, 0.0, 0.0], [0.9185376763343811, 0.08146224915981293, 0.0, 0.0], [0.9710507392883301, 0.014702684246003628, 0.014246641658246517, 0.0], [0.8560346364974976, 0.05910031870007515, 0.03359616920351982, 0.05126882344484329]], [[1.0, 0.0, 0.0, 0.0], [0.0007006499799899757, 0.9992992877960205, 0.0, 0.0], [0.0002634684497024864, 0.7020190358161926, 0.29771748185157776, 0.0], [0.0008376851910725236, 0.31719887256622314, 0.20090007781982422, 0.4810633063316345]], [[1.0, 0.0, 0.0, 0.0], [0.9344024062156677, 0.0655975341796875, 0.0, 0.0], [0.9808494448661804, 0.014237466268241405, 0.004913087468594313, 0.0], [0.9793763160705566, 0.010494445450603962, 0.0023295313585549593, 0.0077995979227125645]], [[1.0, 0.0, 0.0, 0.0], [0.8740801811218262, 0.12591975927352905, 0.0, 0.0], [0.7645993828773499, 0.1385895013809204, 0.09681106358766556, 0.0], [0.5583862662315369, 0.12230575829744339, 0.16377806663513184, 0.15553000569343567]], [[1.0, 0.0, 0.0, 0.0], [0.8461255431175232, 0.15387442708015442, 0.0, 0.0], [0.646896243095398, 0.25584787130355835, 0.0972558856010437, 0.0], [0.6288386583328247, 0.11992543190717697, 0.18597473204135895, 0.06526115536689758]]]], "left_text": ["Once", " upon", " a", " time"], "right_text": ["Once", " upon", " a", " time"]}], "default_filter": "0", "display_mode": "dark", "root_div_id": "bertviz-9e83c77014774ea2b5f675667cab7939", "include_layers": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], "include_heads": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], "total_heads": 12}; // HACK: {"attention": [{"name": null, "attn": [[[[1.0, 0.0, 0.0, 0.0], [0.9386990666389465, 0.061300959438085556, 0.0, 0.0], [0.8154762983322144, 0.12783433496952057, 0.05668935924768448, 0.0], [0.6848450303077698, 0.1597706824541092, 0.11659108102321625, 0.038793209940195084]], [[1.0, 0.0, 0.0, 0.0], [0.0004088179557584226, 0.9995911717414856, 0.0, 0.0], [0.00405538734048605, 0.005558843724429607, 0.9903857707977295, 0.0], [0.005872634705156088, 0.00941621046513319, 0.003359881229698658, 0.9813512563705444]], [[1.0, 0.0, 0.0, 0.0], [0.8988897204399109, 0.10111028701066971, 0.0, 0.0], [0.6154751181602478, 0.3070519268512726, 0.07747300714254379, 0.0], [0.4963447153568268, 0.2898261845111847, 0.148002490401268, 0.06582660973072052]], [[1.0, 0.0, 0.0, 0.0], [0.26781120896339417, 0.7321888208389282, 0.0, 0.0], [0.19684956967830658, 0.17740345001220703, 0.6257469654083252, 0.0], [0.055355191230773926, 0.009077605791389942, 0.026112157851457596, 0.9094550609588623]], [[1.0, 0.0, 0.0, 0.0], [0.8783911466598511, 0.1216089054942131, 0.0, 0.0], [0.7294161915779114, 0.15237148106098175, 0.11821236461400986, 0.0], [0.6454820036888123, 0.10018995404243469, 0.06108938157558441, 0.19323866069316864]], [[1.0, 0.0, 0.0, 0.0], [0.13609729707241058, 0.863902747631073, 0.0, 0.0], [0.14422282576560974, 0.02482943795621395, 0.8309476971626282, 0.0], [0.06886947900056839, 0.00038394948933273554, 0.0005880817188881338, 0.9301584362983704]], [[1.0, 0.0, 0.0, 0.0], [0.8347172737121582, 0.16528268158435822, 0.0, 0.0], [0.8134347796440125, 0.16262391209602356, 0.023941287770867348, 0.0], [0.6323543190956116, 0.2020726352930069, 0.049605876207351685, 0.11596715450286865]], [[1.0, 0.0, 0.0, 0.0], [0.9673805832862854, 0.032619379460811615, 0.0, 0.0], [0.5056912899017334, 0.3085750639438629, 0.18573366105556488, 0.0], [0.4036475718021393, 0.17038263380527496, 0.3024134337902069, 0.12355638295412064]], [[1.0, 0.0, 0.0, 0.0], [0.8107370734214783, 0.18926295638084412, 0.0, 0.0], [0.13179363310337067, 0.09435887634754181, 0.7738475203514099, 0.0], [0.2725644111633301, 0.23042191565036774, 0.4119819402694702, 0.08503173291683197]], [[1.0, 0.0, 0.0, 0.0], [0.8175715804100037, 0.18242843449115753, 0.0, 0.0], [0.5780487060546875, 0.19336670637130737, 0.22858461737632751, 0.0], [0.4875624179840088, 0.17753055691719055, 0.21724726259708405, 0.11765982210636139]], [[1.0, 0.0, 0.0, 0.0], [0.6669260263442993, 0.3330739736557007, 0.0, 0.0], [0.5709012150764465, 0.13868401944637299, 0.2904147207736969, 0.0], [0.44481632113456726, 0.13260209560394287, 0.13473743200302124, 0.287844181060791]], [[1.0, 0.0, 0.0, 0.0], [0.6917881965637207, 0.3082118034362793, 0.0, 0.0], [0.54864102602005, 0.21843697130680084, 0.23292198777198792, 0.0], [0.5848237872123718, 0.1656769961118698, 0.08835474401712418, 0.16114450991153717]]], [[[1.0, 0.0, 0.0, 0.0], [0.9974104762077332, 0.0025895689614117146, 0.0, 0.0], [0.8742523789405823, 0.09441448748111725, 0.03133314475417137, 0.0], [0.507357656955719, 0.13263900578022003, 0.3226173520088196, 0.0373859629034996]], [[1.0, 0.0, 0.0, 0.0], [0.9443351030349731, 0.055664945393800735, 0.0, 0.0], [0.813620924949646, 0.10736654698848724, 0.07901259511709213, 0.0], [0.6207619309425354, 0.1271166354417801, 0.1800544559955597, 0.07206691801548004]], [[1.0, 0.0, 0.0, 0.0], [0.9811798334121704, 0.018820151686668396, 0.0, 0.0], [0.7717289328575134, 0.034391410648822784, 0.1938796192407608, 0.0], [0.6161508560180664, 0.04137984290719032, 0.18934880197048187, 0.15312054753303528]], [[1.0, 0.0, 0.0, 0.0], [0.5964542031288147, 0.4035457670688629, 0.0, 0.0], [0.556045413017273, 0.217601016163826, 0.22635358572006226, 0.0], [0.5401265621185303, 0.13903097808361053, 0.14026693999767303, 0.18057547509670258]], [[1.0, 0.0, 0.0, 0.0], [0.9224552512168884, 0.0775446966290474, 0.0, 0.0], [0.82497638463974, 0.09550265967845917, 0.07952093333005905, 0.0], [0.7255311608314514, 0.08903462439775467, 0.06963469833135605, 0.11579952389001846]], [[1.0, 0.0, 0.0, 0.0], [0.9569482207298279, 0.04305185005068779, 0.0, 0.0], [0.8812008500099182, 0.04771461710333824, 0.07108456641435623, 0.0], [0.7213462591171265, 0.09610321372747421, 0.10770922154188156, 0.07484129816293716]], [[1.0, 0.0, 0.0, 0.0], [0.9760539531707764, 0.023946037515997887, 0.0, 0.0], [0.7848144173622131, 0.10564027726650238, 0.10954530537128448, 0.0], [0.6648852229118347, 0.12347869575023651, 0.1221461296081543, 0.08949001133441925]], [[1.0, 0.0, 0.0, 0.0], [0.9455268979072571, 0.05447304621338844, 0.0, 0.0], [0.7956106066703796, 0.1285388469696045, 0.07585044205188751, 0.0], [0.7267206311225891, 0.12868694961071014, 0.0806252658367157, 0.0639672577381134]], [[1.0, 0.0, 0.0, 0.0], [0.8889747858047485, 0.11102523654699326, 0.0, 0.0], [0.7811747193336487, 0.08867131918668747, 0.13015392422676086, 0.0], [0.7282044887542725, 0.07868865877389908, 0.11829928308725357, 0.0748075470328331]], [[1.0, 0.0, 0.0, 0.0], [0.9835500717163086, 0.016449911519885063, 0.0, 0.0], [0.8598909974098206, 0.04173654317855835, 0.09837247431278229, 0.0], [0.8182245492935181, 0.03585519641637802, 0.11249307543039322, 0.033427219837903976]], [[1.0, 0.0, 0.0, 0.0], [0.00032169747282750905, 0.999678373336792, 0.0, 0.0], [0.0006908061914145947, 0.5951332449913025, 0.4041759967803955, 0.0], [0.0007917824550531805, 0.3606407046318054, 0.2596016526222229, 0.378965824842453]], [[1.0, 0.0, 0.0, 0.0], [0.7610664963722229, 0.2389335185289383, 0.0, 0.0], [0.21693289279937744, 0.0014776987954974174, 0.7815893888473511, 0.0], [0.38026267290115356, 0.007033858448266983, 0.003747573820874095, 0.6089559197425842]]], [[[1.0, 0.0, 0.0, 0.0], [0.8777437210083008, 0.12225628644227982, 0.0, 0.0], [0.5988823771476746, 0.34572702646255493, 0.05539068207144737, 0.0], [0.5485967993736267, 0.3528253734111786, 0.06150837242603302, 0.03706948831677437]], [[1.0, 0.0, 0.0, 0.0], [0.9846766591072083, 0.015323302708566189, 0.0, 0.0], [0.9292697310447693, 0.05442306771874428, 0.01630726270377636, 0.0], [0.949051022529602, 0.025398464873433113, 0.014029561541974545, 0.01152098923921585]], [[1.0, 0.0, 0.0, 0.0], [0.9990108013153076, 0.0009891879744827747, 0.0, 0.0], [0.44437476992607117, 0.5228517055511475, 0.0327734649181366, 0.0], [0.3761645257472992, 0.4615734815597534, 0.15918758511543274, 0.003074448788538575]], [[1.0, 0.0, 0.0, 0.0], [0.9900113940238953, 0.009988595731556416, 0.0, 0.0], [0.7836636304855347, 0.11458471417427063, 0.1017516553401947, 0.0], [0.5403807163238525, 0.09871184080839157, 0.34999293088912964, 0.010914448648691177]], [[1.0, 0.0, 0.0, 0.0], [0.9763596653938293, 0.023640276864171028, 0.0, 0.0], [0.7607811689376831, 0.16980114579200745, 0.06941767036914825, 0.0], [0.5048671960830688, 0.37121960520744324, 0.1156923919916153, 0.008220830000936985]], [[1.0, 0.0, 0.0, 0.0], [0.9743636846542358, 0.025636261329054832, 0.0, 0.0], [0.7166638970375061, 0.21827980875968933, 0.06505639106035233, 0.0], [0.5626057386398315, 0.24958252906799316, 0.11356394737958908, 0.07424774020910263]], [[1.0, 0.0, 0.0, 0.0], [0.9792769551277161, 0.020723039284348488, 0.0, 0.0], [0.9174785017967224, 0.03259960934519768, 0.049921855330467224, 0.0], [0.8691339492797852, 0.02953912690281868, 0.07114680856466293, 0.030180148780345917]], [[1.0, 0.0, 0.0, 0.0], [0.8547745943069458, 0.14522548019886017, 0.0, 0.0], [0.6579469442367554, 0.12219787389039993, 0.21985509991645813, 0.0], [0.5189388990402222, 0.061927203088998795, 0.11605015397071838, 0.30308374762535095]], [[1.0, 0.0, 0.0, 0.0], [0.9882072806358337, 0.01179276593029499, 0.0, 0.0], [0.7308551073074341, 0.24959583580493927, 0.019549062475562096, 0.0], [0.6944138407707214, 0.22592496871948242, 0.06695352494716644, 0.012707757763564587]], [[1.0, 0.0, 0.0, 0.0], [0.9850941896438599, 0.014905845746397972, 0.0, 0.0], [0.7803608179092407, 0.18376260995864868, 0.03587659075856209, 0.0], [0.5902022123336792, 0.16575652360916138, 0.11212771385908127, 0.13191351294517517]], [[1.0, 0.0, 0.0, 0.0], [0.9426629543304443, 0.05733703821897507, 0.0, 0.0], [0.8354954123497009, 0.08382712304592133, 0.08067747950553894, 0.0], [0.6779214143753052, 0.06342263519763947, 0.06287086755037308, 0.1957850605249405]], [[1.0, 0.0, 0.0, 0.0], [0.9698477387428284, 0.030152220278978348, 0.0, 0.0], [0.9114020466804504, 0.03938926011323929, 0.04920866712927818, 0.0], [0.8461784720420837, 0.03164617344737053, 0.03891567885875702, 0.08325976133346558]]], [[[1.0, 0.0, 0.0, 0.0], [0.9934425354003906, 0.006557411514222622, 0.0, 0.0], [0.9865400195121765, 0.0003556347801350057, 0.013104327023029327, 0.0], [0.9819018244743347, 0.00029128711321391165, 0.001010638428851962, 0.01679622009396553]], [[1.0, 0.0, 0.0, 0.0], [0.9743368625640869, 0.0256631039083004, 0.0, 0.0], [0.8675225973129272, 0.04879573732614517, 0.0836816132068634, 0.0], [0.769124448299408, 0.06742677837610245, 0.12627796828746796, 0.03717075288295746]], [[1.0, 0.0, 0.0, 0.0], [0.9132490158081055, 0.08675090968608856, 0.0, 0.0], [0.1305047869682312, 0.7643388509750366, 0.10515644401311874, 0.0], [0.03268545866012573, 0.2975099980831146, 0.6668018102645874, 0.003002762096002698]], [[1.0, 0.0, 0.0, 0.0], [0.9675267934799194, 0.03247322887182236, 0.0, 0.0], [0.20501264929771423, 0.7644042372703552, 0.030583159998059273, 0.0], [0.3564446270465851, 0.456147700548172, 0.18385004997253418, 0.003557646879926324]], [[1.0, 0.0, 0.0, 0.0], [0.9995332956314087, 0.00046671880409121513, 0.0, 0.0], [0.9811180233955383, 0.005223915446549654, 0.013658045791089535, 0.0], [0.9865487217903137, 0.0035811427515000105, 0.008508994244039059, 0.0013611215399578214]], [[1.0, 0.0, 0.0, 0.0], [0.9925814867019653, 0.007418475113809109, 0.0, 0.0], [0.9046229124069214, 0.04340042173862457, 0.05197671800851822, 0.0], [0.8455096483230591, 0.08458296209573746, 0.04902404919266701, 0.020883450284600258]], [[1.0, 0.0, 0.0, 0.0], [0.951549768447876, 0.04845014587044716, 0.0, 0.0], [0.371051162481308, 0.4936000108718872, 0.1353488564491272, 0.0], [0.2800333797931671, 0.35663995146751404, 0.2943766415119171, 0.06894995272159576]], [[1.0, 0.0, 0.0, 0.0], [0.9788253903388977, 0.021174630150198936, 0.0, 0.0], [0.5259523391723633, 0.3666198253631592, 0.10742782801389694, 0.0], [0.24780124425888062, 0.3971612751483917, 0.29692593216896057, 0.05811157822608948]], [[1.0, 0.0, 0.0, 0.0], [0.9607478976249695, 0.0392521433532238, 0.0, 0.0], [0.3668893277645111, 0.6170048117637634, 0.01610594242811203, 0.0], [0.27501991391181946, 0.6715264916419983, 0.04020080342888832, 0.01325280498713255]], [[1.0, 0.0, 0.0, 0.0], [0.8876343369483948, 0.11236560344696045, 0.0, 0.0], [0.4404723644256592, 0.5188531875610352, 0.04067445173859596, 0.0], [0.16635125875473022, 0.7666470408439636, 0.05007048323750496, 0.016931286081671715]], [[1.0, 0.0, 0.0, 0.0], [0.994976282119751, 0.00502379285171628, 0.0, 0.0], [0.9010947346687317, 0.020267922431230545, 0.07863742858171463, 0.0], [0.8797561526298523, 0.011794530786573887, 0.020212076604366302, 0.08823718130588531]], [[1.0, 0.0, 0.0, 0.0], [0.9816916584968567, 0.018308322876691818, 0.0, 0.0], [0.5607301592826843, 0.3647148311138153, 0.07455500960350037, 0.0], [0.29198333621025085, 0.5104015469551086, 0.16998480260372162, 0.027630332857370377]]], [[[1.0, 0.0, 0.0, 0.0], [0.9456270337104797, 0.05437295511364937, 0.0, 0.0], [0.10138240456581116, 0.8650736808776855, 0.03354392200708389, 0.0], [0.16850735247135162, 0.6010857224464417, 0.21984510123729706, 0.010561839677393436]], [[1.0, 0.0, 0.0, 0.0], [0.9804814457893372, 0.019518550485372543, 0.0, 0.0], [0.5541265606880188, 0.40906739234924316, 0.036805957555770874, 0.0], [0.6225647330284119, 0.21242354810237885, 0.14110197126865387, 0.02390974387526512]], [[1.0, 0.0, 0.0, 0.0], [0.9821803569793701, 0.017819629982113838, 0.0, 0.0], [0.9311659932136536, 0.045474160462617874, 0.023359864950180054, 0.0], [0.9538038969039917, 0.016862165182828903, 0.019785597920417786, 0.009548344649374485]], [[1.0, 0.0, 0.0, 0.0], [0.9446542263031006, 0.05534574016928673, 0.0, 0.0], [0.7577371001243591, 0.1763465255498886, 0.06591632962226868, 0.0], [0.4732452929019928, 0.21535323560237885, 0.2761582136154175, 0.03524328023195267]], [[1.0, 0.0, 0.0, 0.0], [0.9558166265487671, 0.0441834032535553, 0.0, 0.0], [0.9118539094924927, 0.06744291633367538, 0.020703203976154327, 0.0], [0.9482555389404297, 0.0150406863540411, 0.019270574674010277, 0.017433328554034233]], [[1.0, 0.0, 0.0, 0.0], [0.9457424879074097, 0.05425754934549332, 0.0, 0.0], [0.7204064726829529, 0.2078121155500412, 0.07178150117397308, 0.0], [0.553848385810852, 0.21665343642234802, 0.1856357455253601, 0.04386242851614952]], [[1.0, 0.0, 0.0, 0.0], [0.9527818560600281, 0.047218166291713715, 0.0, 0.0], [0.862822413444519, 0.0941883772611618, 0.042989250272512436, 0.0], [0.7356595396995544, 0.11942270398139954, 0.10957179218530655, 0.035345952957868576]], [[1.0, 0.0, 0.0, 0.0], [0.9895219206809998, 0.010478000156581402, 0.0, 0.0], [0.5952821969985962, 0.04355480521917343, 0.3611629903316498, 0.0], [0.5443375706672668, 0.02792736329138279, 0.12166851758956909, 0.3060666024684906]], [[1.0, 0.0, 0.0, 0.0], [0.9983909130096436, 0.001609062310308218, 0.0, 0.0], [0.9702750444412231, 0.020298831164836884, 0.009426100179553032, 0.0], [0.9740654826164246, 0.005195136647671461, 0.00710366340354085, 0.013635833747684956]], [[1.0, 0.0, 0.0, 0.0], [0.9544646143913269, 0.045535434037446976, 0.0, 0.0], [0.9005610346794128, 0.07555318623781204, 0.023885833099484444, 0.0], [0.6340034008026123, 0.11728543788194656, 0.1907411515712738, 0.05796998739242554]], [[1.0, 0.0, 0.0, 0.0], [0.9931398034095764, 0.006860141176730394, 0.0, 0.0], [0.9827604293823242, 0.010718005709350109, 0.006521613337099552, 0.0], [0.9867382049560547, 0.008362957276403904, 0.002424329984933138, 0.002474547829478979]], [[1.0, 0.0, 0.0, 0.0], [0.9999589920043945, 4.100505611859262e-05, 0.0, 0.0], [2.1167596564453106e-09, 0.9999597072601318, 4.027165050501935e-05, 0.0], [7.296709764181841e-11, 1.9408530338438368e-09, 0.9999985694885254, 1.3913225984651945e-06]]], [[[1.0, 0.0, 0.0, 0.0], [0.9962033629417419, 0.0037966156378388405, 0.0, 0.0], [0.9842968583106995, 0.0016433977289125323, 0.014059669338166714, 0.0], [0.9883202314376831, 0.001260109362192452, 0.008988087996840477, 0.0014315539738163352]], [[1.0, 0.0, 0.0, 0.0], [0.9986768364906311, 0.0013230948243290186, 0.0, 0.0], [0.995591402053833, 2.1617710444843397e-05, 0.004387076012790203, 0.0], [0.9968061447143555, 9.023295206134208e-06, 0.00025128384004347026, 0.002933504292741418]], [[1.0, 0.0, 0.0, 0.0], [0.7163896560668945, 0.28361034393310547, 0.0, 0.0], [0.6065196990966797, 0.38076040148735046, 0.012719940394163132, 0.0], [0.4247047007083893, 0.44696244597435, 0.1107916310429573, 0.01754121668636799]], [[1.0, 0.0, 0.0, 0.0], [0.9688196182250977, 0.031180329620838165, 0.0, 0.0], [0.7945992946624756, 0.18035992980003357, 0.025040794163942337, 0.0], [0.7301396727561951, 0.16359831392765045, 0.047983068972826004, 0.05827898159623146]], [[1.0, 0.0, 0.0, 0.0], [0.779181957244873, 0.22081805765628815, 0.0, 0.0], [0.3038197159767151, 0.6817625761032104, 0.014417625032365322, 0.0], [0.4583328068256378, 0.3163487911224365, 0.047658804804086685, 0.17765960097312927]], [[1.0, 0.0, 0.0, 0.0], [0.9733663201332092, 0.026633717119693756, 0.0, 0.0], [0.9832007884979248, 0.004912443924695253, 0.011886732652783394, 0.0], [0.9919832348823547, 0.0025306979659944773, 0.005043887998908758, 0.0004421924240887165]], [[1.0, 0.0, 0.0, 0.0], [0.8306384682655334, 0.16936151683330536, 0.0, 0.0], [0.2542227804660797, 0.7054166793823242, 0.04036049172282219, 0.0], [0.3181505799293518, 0.30745986104011536, 0.35357797145843506, 0.020811552181839943]], [[1.0, 0.0, 0.0, 0.0], [0.8333271741867065, 0.16667279601097107, 0.0, 0.0], [0.7151976823806763, 0.266999751329422, 0.017802558839321136, 0.0], [0.510219931602478, 0.4042413830757141, 0.06920824199914932, 0.016330400481820107]], [[1.0, 0.0, 0.0, 0.0], [0.9659283757209778, 0.034071583300828934, 0.0, 0.0], [0.9231240153312683, 0.04189451411366463, 0.034981418401002884, 0.0], [0.8273051381111145, 0.05188829451799393, 0.0961170643568039, 0.024689441546797752]], [[1.0, 0.0, 0.0, 0.0], [0.9987831711769104, 0.0012168376706540585, 0.0, 0.0], [0.980158805847168, 0.010732371360063553, 0.009108783677220345, 0.0], [0.9938849806785583, 0.0023680413141846657, 0.0026110506150871515, 0.0011358421761542559]], [[1.0, 0.0, 0.0, 0.0], [0.9949577450752258, 0.005042257718741894, 0.0, 0.0], [0.975950300693512, 0.01238936372101307, 0.011660300195217133, 0.0], [0.9841645359992981, 0.0036597491707652807, 0.007766601629555225, 0.004409154411405325]], [[1.0, 0.0, 0.0, 0.0], [0.9851452112197876, 0.014854790642857552, 0.0, 0.0], [0.8303000926971436, 0.008477164432406425, 0.1612226814031601, 0.0], [0.8953334093093872, 0.021161740645766258, 0.032138749957084656, 0.05136607959866524]]], [[[1.0, 0.0, 0.0, 0.0], [0.9686926603317261, 0.031307317316532135, 0.0, 0.0], [0.7896577715873718, 0.1577855944633484, 0.0525566041469574, 0.0], [0.7174322605133057, 0.1421930491924286, 0.08254401385784149, 0.05783069133758545]], [[1.0, 0.0, 0.0, 0.0], [0.965919017791748, 0.03408098593354225, 0.0, 0.0], [0.9099407196044922, 0.08437921106815338, 0.005680139642208815, 0.0], [0.9286556839942932, 0.05655685067176819, 0.00780187314376235, 0.006985512096434832]], [[1.0, 0.0, 0.0, 0.0], [0.9913275837898254, 0.0086723817512393, 0.0, 0.0], [0.9770335555076599, 0.007762562949210405, 0.015203826129436493, 0.0], [0.9675631523132324, 0.009585700929164886, 0.013097590766847134, 0.009753648191690445]], [[1.0, 0.0, 0.0, 0.0], [0.9899054169654846, 0.010094597935676575, 0.0, 0.0], [0.9820333123207092, 0.014128822833299637, 0.003837809432297945, 0.0], [0.9646238088607788, 0.014664663933217525, 0.003418794134631753, 0.017292624339461327]], [[1.0, 0.0, 0.0, 0.0], [0.9868577718734741, 0.01314218807965517, 0.0, 0.0], [0.9248044490814209, 0.033421117812395096, 0.041774436831474304, 0.0], [0.8940715789794922, 0.02904936857521534, 0.012493700720369816, 0.06438536942005157]], [[1.0, 0.0, 0.0, 0.0], [0.9452899694442749, 0.05471005663275719, 0.0, 0.0], [0.8996859788894653, 0.0680723786354065, 0.03224168345332146, 0.0], [0.8663982152938843, 0.037268396466970444, 0.01863349974155426, 0.07769980281591415]], [[1.0, 0.0, 0.0, 0.0], [0.9880596995353699, 0.011940322816371918, 0.0, 0.0], [0.9389775991439819, 0.004000138025730848, 0.0570223294198513, 0.0], [0.9692215919494629, 0.008506412617862225, 0.01037130132317543, 0.01190069317817688]], [[1.0, 0.0, 0.0, 0.0], [0.9841916561126709, 0.0158083438873291, 0.0, 0.0], [0.9381868243217468, 0.03972439840435982, 0.02208869904279709, 0.0], [0.9378873705863953, 0.012357835657894611, 0.023546654731035233, 0.026208236813545227]], [[1.0, 0.0, 0.0, 0.0], [0.9501339197158813, 0.04986611008644104, 0.0, 0.0], [0.6383427977561951, 0.3556228280067444, 0.0060343435034155846, 0.0], [0.3149145841598511, 0.36217254400253296, 0.24434049427509308, 0.0785723328590393]], [[1.0, 0.0, 0.0, 0.0], [0.9941297769546509, 0.005870290100574493, 0.0, 0.0], [0.9932490587234497, 0.0001981214591069147, 0.006552911829203367, 0.0], [0.9974476099014282, 0.00034304725704714656, 0.00030853209318593144, 0.0019008012022823095]], [[1.0, 0.0, 0.0, 0.0], [0.9892164468765259, 0.010783570818603039, 0.0, 0.0], [0.9873945713043213, 0.009279372170567513, 0.0033260826021432877, 0.0], [0.972877025604248, 0.010328023694455624, 0.005593191832304001, 0.011201729066669941]], [[1.0, 0.0, 0.0, 0.0], [0.9299083352088928, 0.07009174674749374, 0.0, 0.0], [0.5345919132232666, 0.42335209250450134, 0.04205602407455444, 0.0], [0.5218877792358398, 0.15737886726856232, 0.22668243944644928, 0.09405085444450378]]], [[[1.0, 0.0, 0.0, 0.0], [0.8152306079864502, 0.1847693920135498, 0.0, 0.0], [0.1516718715429306, 0.833308219909668, 0.015019959770143032, 0.0], [0.49499255418777466, 0.2698947787284851, 0.16514304280281067, 0.06996963918209076]], [[1.0, 0.0, 0.0, 0.0], [0.9965517520904541, 0.0034482446499168873, 0.0, 0.0], [0.9903267025947571, 0.0029440708458423615, 0.006729251705110073, 0.0], [0.976673424243927, 0.003898720722645521, 0.004056133795529604, 0.015371722169220448]], [[1.0, 0.0, 0.0, 0.0], [0.9990725517272949, 0.0009273977484554052, 0.0, 0.0], [0.9982885718345642, 5.60950102226343e-05, 0.0016553562600165606, 0.0], [0.9987342953681946, 0.0002059258840745315, 0.00037062805495224893, 0.0006890848162584007]], [[1.0, 0.0, 0.0, 0.0], [0.9924098253250122, 0.007590171881020069, 0.0, 0.0], [0.9121126532554626, 0.05852287635207176, 0.029364431276917458, 0.0], [0.8866461515426636, 0.02146276645362377, 0.045157935470342636, 0.04673315957188606]], [[1.0, 0.0, 0.0, 0.0], [0.9936866164207458, 0.006313389167189598, 0.0, 0.0], [0.9788262844085693, 0.01952739991247654, 0.0016462651547044516, 0.0], [0.6776542067527771, 0.26524707674980164, 0.026424018666148186, 0.03067469410598278]], [[1.0, 0.0, 0.0, 0.0], [0.9880113005638123, 0.011988743208348751, 0.0, 0.0], [0.8073614239692688, 0.17933447659015656, 0.013304171152412891, 0.0], [0.7785122394561768, 0.10176698118448257, 0.050369784235954285, 0.06935103237628937]], [[1.0, 0.0, 0.0, 0.0], [0.9928534626960754, 0.007146543823182583, 0.0, 0.0], [0.9550600051879883, 0.0375756099820137, 0.007364459335803986, 0.0], [0.9515448212623596, 0.01113679725676775, 0.006475043948739767, 0.030843203887343407]], [[1.0, 0.0, 0.0, 0.0], [0.996581494808197, 0.0034185785334557295, 0.0, 0.0], [0.9929023385047913, 0.0030998338479548693, 0.003997880965471268, 0.0], [0.9910842180252075, 0.001655424595810473, 0.00123500544577837, 0.006025394424796104]], [[1.0, 0.0, 0.0, 0.0], [0.9728560447692871, 0.02714393474161625, 0.0, 0.0], [0.49232715368270874, 0.4648086428642273, 0.04286423698067665, 0.0], [0.6295591592788696, 0.08698202669620514, 0.20048974454402924, 0.0829690620303154]], [[1.0, 0.0, 0.0, 0.0], [0.9845507740974426, 0.015449251048266888, 0.0, 0.0], [0.8769374489784241, 0.10896755009889603, 0.014095025137066841, 0.0], [0.8991056680679321, 0.03740262985229492, 0.03791748732328415, 0.02557418681681156]], [[1.0, 0.0, 0.0, 0.0], [0.9990171194076538, 0.0009828259935602546, 0.0, 0.0], [0.987930178642273, 0.0007154862978495657, 0.011354356072843075, 0.0], [0.9956771731376648, 0.0016567996935918927, 0.0006519135204143822, 0.002014072611927986]], [[1.0, 0.0, 0.0, 0.0], [0.9978266358375549, 0.002173357643187046, 0.0, 0.0], [0.9969369173049927, 0.0019075709860771894, 0.001155502861365676, 0.0], [0.9801771640777588, 0.015518316067755222, 0.0029318577144294977, 0.0013725846074521542]]], [[[1.0, 0.0, 0.0, 0.0], [0.9641653895378113, 0.03583463653922081, 0.0, 0.0], [0.9267670512199402, 0.030515087768435478, 0.042717743664979935, 0.0], [0.9287298321723938, 0.014672821387648582, 0.005424496252089739, 0.05117287486791611]], [[1.0, 0.0, 0.0, 0.0], [0.9681812524795532, 0.031818728893995285, 0.0, 0.0], [0.9710885882377625, 0.009570722468197346, 0.019340762868523598, 0.0], [0.92911297082901, 0.04387730732560158, 0.005058508366346359, 0.021951153874397278]], [[1.0, 0.0, 0.0, 0.0], [0.9805691242218018, 0.01943090744316578, 0.0, 0.0], [0.950011134147644, 0.028662800788879395, 0.021325984969735146, 0.0], [0.7468706965446472, 0.11401107907295227, 0.05302668735384941, 0.08609165996313095]], [[1.0, 0.0, 0.0, 0.0], [0.9052550792694092, 0.09474489092826843, 0.0, 0.0], [0.9708861708641052, 0.012041798792779446, 0.017072007060050964, 0.0], [0.9868795275688171, 0.007712827064096928, 0.003937221597880125, 0.0014704845380038023]], [[1.0, 0.0, 0.0, 0.0], [0.976440966129303, 0.023559115827083588, 0.0, 0.0], [0.5788701176643372, 0.39372190833091736, 0.02740800753235817, 0.0], [0.642951488494873, 0.16725262999534607, 0.07466473430395126, 0.11513117700815201]], [[1.0, 0.0, 0.0, 0.0], [0.9579542279243469, 0.04204577952623367, 0.0, 0.0], [0.8228423595428467, 0.15856002271175385, 0.018597567453980446, 0.0], [0.7481485605239868, 0.14154241979122162, 0.05527002736926079, 0.05503902584314346]], [[1.0, 0.0, 0.0, 0.0], [0.9709784388542175, 0.02902161329984665, 0.0, 0.0], [0.9457347989082336, 0.023699982091784477, 0.03056528978049755, 0.0], [0.9576695561408997, 0.0068832202814519405, 0.01847112365067005, 0.01697608456015587]], [[1.0, 0.0, 0.0, 0.0], [0.8202493190765381, 0.17975062131881714, 0.0, 0.0], [0.1268797069787979, 0.852415144443512, 0.020705122500658035, 0.0], [0.6484611630439758, 0.2183963656425476, 0.08478964865207672, 0.04835275933146477]], [[1.0, 0.0, 0.0, 0.0], [0.9797539114952087, 0.02024609036743641, 0.0, 0.0], [0.866890013217926, 0.06186733394861221, 0.071242555975914, 0.0], [0.9428103566169739, 0.007891419343650341, 0.03408453240990639, 0.01521374098956585]], [[1.0, 0.0, 0.0, 0.0], [0.9916059970855713, 0.008394032716751099, 0.0, 0.0], [0.9695702195167542, 0.00943637266755104, 0.020993417128920555, 0.0], [0.9689549207687378, 0.0036615014541894197, 0.011341612786054611, 0.0160419512540102]], [[1.0, 0.0, 0.0, 0.0], [0.9582428932189941, 0.04175712540745735, 0.0, 0.0], [0.901043713092804, 0.03691595047712326, 0.062040288001298904, 0.0], [0.9577464461326599, 0.010657505132257938, 0.018132023513317108, 0.013463936746120453]], [[1.0, 0.0, 0.0, 0.0], [0.9969320297241211, 0.003067924175411463, 0.0, 0.0], [0.9918131828308105, 0.004132367670536041, 0.004054508171975613, 0.0], [0.9890053868293762, 0.0021931633818894625, 0.005232121795415878, 0.0035694334656000137]]], [[[1.0, 0.0, 0.0, 0.0], [0.9969555139541626, 0.0030444886069744825, 0.0, 0.0], [0.9851868748664856, 0.007513352204114199, 0.007299788761883974, 0.0], [0.9798617362976074, 0.0053931032307446, 0.003398307366296649, 0.011346948333084583]], [[1.0, 0.0, 0.0, 0.0], [0.9674856066703796, 0.03251439332962036, 0.0, 0.0], [0.9664750099182129, 0.013661845587193966, 0.019863173365592957, 0.0], [0.9807192087173462, 0.007637174800038338, 0.006702091544866562, 0.004941482562571764]], [[1.0, 0.0, 0.0, 0.0], [0.9890398979187012, 0.010960083454847336, 0.0, 0.0], [0.9830260872840881, 0.005443778354674578, 0.011530173942446709, 0.0], [0.9844696521759033, 0.004001241642981768, 0.002076371107250452, 0.009452666155993938]], [[1.0, 0.0, 0.0, 0.0], [0.968173086643219, 0.03182695060968399, 0.0, 0.0], [0.8129364848136902, 0.1795225739479065, 0.007540897931903601, 0.0], [0.6591830849647522, 0.09190749377012253, 0.11609543114900589, 0.13281407952308655]], [[1.0, 0.0, 0.0, 0.0], [0.9961091876029968, 0.003890847321599722, 0.0, 0.0], [0.9973794221878052, 0.0008493540808558464, 0.001771225011907518, 0.0], [0.9633728861808777, 0.015612751245498657, 0.006984299048781395, 0.014030038379132748]], [[1.0, 0.0, 0.0, 0.0], [0.984983503818512, 0.015016533434391022, 0.0, 0.0], [0.979132354259491, 0.010871018283069134, 0.009996596723794937, 0.0], [0.9027385711669922, 0.011948888190090656, 0.01002631988376379, 0.0752861499786377]], [[1.0, 0.0, 0.0, 0.0], [0.9877049922943115, 0.012294982559978962, 0.0, 0.0], [0.9932931661605835, 0.00501320231705904, 0.00169359368737787, 0.0], [0.9971020817756653, 0.0010363372275605798, 0.0004825495125260204, 0.0013789866352453828]], [[1.0, 0.0, 0.0, 0.0], [0.9850203990936279, 0.014979599043726921, 0.0, 0.0], [0.9828040599822998, 0.01393198873847723, 0.003263913793489337, 0.0], [0.9483480453491211, 0.012949035502970219, 0.008173080161213875, 0.030529823154211044]], [[1.0, 0.0, 0.0, 0.0], [0.9983519315719604, 0.001648136181756854, 0.0, 0.0], [0.9883583188056946, 0.005952488165348768, 0.005689258221536875, 0.0], [0.9730231761932373, 0.011553458869457245, 0.005111686419695616, 0.010311740450561047]], [[1.0, 0.0, 0.0, 0.0], [0.9361947178840637, 0.06380531936883926, 0.0, 0.0], [0.9964156150817871, 0.003257772885262966, 0.0003266428830102086, 0.0], [0.9972208738327026, 0.0011688405647873878, 0.00013327831402420998, 0.001477051293477416]], [[1.0, 0.0, 0.0, 0.0], [0.9690857529640198, 0.030914193019270897, 0.0, 0.0], [0.4394569993019104, 0.5364719033241272, 0.02407115325331688, 0.0], [0.5689855217933655, 0.09534905850887299, 0.139018252491951, 0.1966472715139389]], [[1.0, 0.0, 0.0, 0.0], [0.9965671300888062, 0.003432789584621787, 0.0, 0.0], [0.9914755821228027, 0.003278584685176611, 0.0052459281869232655, 0.0], [0.9846804738044739, 0.005588242318481207, 0.006543194409459829, 0.0031881548929959536]]], [[[1.0, 0.0, 0.0, 0.0], [0.9831099510192871, 0.01689007319509983, 0.0, 0.0], [0.9813851118087769, 0.006740691140294075, 0.011874103918671608, 0.0], [0.9927008152008057, 0.002953227609395981, 0.0024009020999073982, 0.0019450016552582383]], [[1.0, 0.0, 0.0, 0.0], [0.9638515114784241, 0.03614842891693115, 0.0, 0.0], [0.9886592030525208, 0.001487939152866602, 0.009852932766079903, 0.0], [0.9851754307746887, 0.009167972952127457, 0.00093945546541363, 0.004717167001217604]], [[1.0, 0.0, 0.0, 0.0], [0.9924346208572388, 0.007565424777567387, 0.0, 0.0], [0.9907344579696655, 0.0028242620173841715, 0.006441371515393257, 0.0], [0.9539067149162292, 0.010534192435443401, 0.02473657950758934, 0.010822504758834839]], [[1.0, 0.0, 0.0, 0.0], [0.9820282459259033, 0.017971720546483994, 0.0, 0.0], [0.9846252202987671, 0.009556656703352928, 0.00581810949370265, 0.0], [0.9603148102760315, 0.008456315845251083, 0.015347563661634922, 0.015881381928920746]], [[1.0, 0.0, 0.0, 0.0], [0.8473353981971741, 0.15266457200050354, 0.0, 0.0], [0.8800426721572876, 0.06436359137296677, 0.05559370666742325, 0.0], [0.8848745226860046, 0.022276705130934715, 0.059136759489774704, 0.03371203690767288]], [[1.0, 0.0, 0.0, 0.0], [0.9953528642654419, 0.004647143185138702, 0.0, 0.0], [0.9864563941955566, 0.011872557923197746, 0.0016710774507373571, 0.0], [0.7894346117973328, 0.07586614787578583, 0.05390988662838936, 0.08078934997320175]], [[1.0, 0.0, 0.0, 0.0], [0.9870057106018066, 0.012994240038096905, 0.0, 0.0], [0.9848612546920776, 0.005357534624636173, 0.00978116225451231, 0.0], [0.9915668368339539, 0.0022501356434077024, 0.0017708629602566361, 0.004412251524627209]], [[1.0, 0.0, 0.0, 0.0], [0.9763461351394653, 0.023653898388147354, 0.0, 0.0], [0.978955864906311, 0.009210016578435898, 0.011834170669317245, 0.0], [0.9187737107276917, 0.010127253830432892, 0.010750693269073963, 0.06034841760993004]], [[1.0, 0.0, 0.0, 0.0], [0.9702295064926147, 0.029770484194159508, 0.0, 0.0], [0.9917020201683044, 0.006064123939722776, 0.0022338619455695152, 0.0], [0.9723405838012695, 0.00421936484053731, 0.012967241927981377, 0.010472939349710941]], [[1.0, 0.0, 0.0, 0.0], [0.9474547505378723, 0.05254528298974037, 0.0, 0.0], [0.7892311811447144, 0.19919045269489288, 0.011578366160392761, 0.0], [0.5195817351341248, 0.16073419153690338, 0.12157513946294785, 0.19810879230499268]], [[1.0, 0.0, 0.0, 0.0], [0.995196521282196, 0.0048034824430942535, 0.0, 0.0], [0.9895666837692261, 0.004342013970017433, 0.006091330200433731, 0.0], [0.9913172721862793, 0.0016358302673324943, 0.005122620612382889, 0.0019242172129452229]], [[1.0, 0.0, 0.0, 0.0], [0.984255850315094, 0.015744119882583618, 0.0, 0.0], [0.939336359500885, 0.049912188202142715, 0.010751420632004738, 0.0], [0.9289861917495728, 0.0039323726668953896, 0.05194557458162308, 0.015135815367102623]]], [[[1.0, 0.0, 0.0, 0.0], [0.8114467263221741, 0.1885533332824707, 0.0, 0.0], [0.7201673984527588, 0.13667692244052887, 0.14315564930438995, 0.0], [0.22247260808944702, 0.1560344099998474, 0.2920854687690735, 0.3294075131416321]], [[1.0, 0.0, 0.0, 0.0], [0.961300253868103, 0.038699761033058167, 0.0, 0.0], [0.9510312080383301, 0.02735193260014057, 0.021616868674755096, 0.0], [0.9024365544319153, 0.03481404855847359, 0.05083572119474411, 0.011913684196770191]], [[1.0, 0.0, 0.0, 0.0], [0.9698240756988525, 0.030175942927598953, 0.0, 0.0], [0.9727200269699097, 0.018764641135931015, 0.008515366353094578, 0.0], [0.9281275272369385, 0.04201595485210419, 0.017370058223605156, 0.012486468069255352]], [[1.0, 0.0, 0.0, 0.0], [0.809208333492279, 0.19079171121120453, 0.0, 0.0], [0.5442797541618347, 0.35251691937446594, 0.10320333391427994, 0.0], [0.4338865578174591, 0.12048709392547607, 0.3271926939487457, 0.11843376606702805]], [[1.0, 0.0, 0.0, 0.0], [0.9318721890449524, 0.06812779605388641, 0.0, 0.0], [0.9051650166511536, 0.07473728060722351, 0.020097624510526657, 0.0], [0.9208687543869019, 0.024089708924293518, 0.035876765847206116, 0.01916467770934105]], [[1.0, 0.0, 0.0, 0.0], [0.9717282056808472, 0.02827182412147522, 0.0, 0.0], [0.9724358320236206, 0.019023481756448746, 0.008540664799511433, 0.0], [0.9605212807655334, 0.014990556985139847, 0.011638928204774857, 0.012849321588873863]], [[1.0, 0.0, 0.0, 0.0], [0.9798970818519592, 0.020102854818105698, 0.0, 0.0], [0.9890092015266418, 0.006618392188102007, 0.0043723504059016705, 0.0], [0.9625375270843506, 0.018214106559753418, 0.009453018195927143, 0.009795286692678928]], [[1.0, 0.0, 0.0, 0.0], [0.9185376763343811, 0.08146224915981293, 0.0, 0.0], [0.9710507392883301, 0.014702684246003628, 0.014246641658246517, 0.0], [0.8560346364974976, 0.05910031870007515, 0.03359616920351982, 0.05126882344484329]], [[1.0, 0.0, 0.0, 0.0], [0.0007006499799899757, 0.9992992877960205, 0.0, 0.0], [0.0002634684497024864, 0.7020190358161926, 0.29771748185157776, 0.0], [0.0008376851910725236, 0.31719887256622314, 0.20090007781982422, 0.4810633063316345]], [[1.0, 0.0, 0.0, 0.0], [0.9344024062156677, 0.0655975341796875, 0.0, 0.0], [0.9808494448661804, 0.014237466268241405, 0.004913087468594313, 0.0], [0.9793763160705566, 0.010494445450603962, 0.0023295313585549593, 0.0077995979227125645]], [[1.0, 0.0, 0.0, 0.0], [0.8740801811218262, 0.12591975927352905, 0.0, 0.0], [0.7645993828773499, 0.1385895013809204, 0.09681106358766556, 0.0], [0.5583862662315369, 0.12230575829744339, 0.16377806663513184, 0.15553000569343567]], [[1.0, 0.0, 0.0, 0.0], [0.8461255431175232, 0.15387442708015442, 0.0, 0.0], [0.646896243095398, 0.25584787130355835, 0.0972558856010437, 0.0], [0.6288386583328247, 0.11992543190717697, 0.18597473204135895, 0.06526115536689758]]]], "left_text": ["Once", " upon", " a", " time"], "right_text": ["Once", " upon", " a", " time"]}], "default_filter": "0", "display_mode": "dark", "root_div_id": "bertviz-9e83c77014774ea2b5f675667cab7939", "include_layers": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], "include_heads": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], "total_heads": 12} is a template marker that is replaced by actual params.
        const config = {};

        const MIN_X = 0;
        const MIN_Y = 0;
        const DIV_WIDTH = 970;
        const THUMBNAIL_PADDING = 5;
        const DETAIL_WIDTH = 300;
        const DETAIL_ATTENTION_WIDTH = 140;
        const DETAIL_BOX_WIDTH = 80;
        const DETAIL_BOX_HEIGHT = 18;
        const DETAIL_PADDING = 15;
        const ATTN_PADDING = 0;
        const DETAIL_HEADING_HEIGHT = 25;
        const HEADING_TEXT_SIZE = 15;
        const HEADING_PADDING = 5;
        const TEXT_SIZE = 13;
        const TEXT_PADDING = 5;
        const LAYER_COLORS = d3.schemeCategory10;
        const PALETTE = {
            'light': {
                'text': 'black',
                'background': 'white',
                'highlight': '#F5F5F5'
            },
            'dark': {
                'text': '#ccc',
                'background': 'black',
                'highlight': '#222'
            }
        }

        function render() {

            // Set global state variables

            var attData = config.attention[config.filter];
            config.leftText = attData.left_text;
            config.rightText = attData.right_text;
            config.attn = attData.attn;
            config.numLayers = config.attn.length;
            config.numHeads = config.attn[0].length;
            config.thumbnailBoxHeight = 7 * (12 / config.totalHeads);
            const axisSize = HEADING_TEXT_SIZE + HEADING_PADDING + TEXT_SIZE + TEXT_PADDING;
            config.thumbnailHeight = Math.max(config.leftText.length, config.rightText.length) * config.thumbnailBoxHeight + 2 * THUMBNAIL_PADDING;
            config.thumbnailWidth = (DIV_WIDTH - axisSize) / config.totalHeads;
            config.detailHeight = Math.max(config.leftText.length, config.rightText.length) * DETAIL_BOX_HEIGHT + 2 * DETAIL_PADDING + DETAIL_HEADING_HEIGHT;
            config.divHeight = Math.max(config.numLayers * config.thumbnailHeight + axisSize, config.detailHeight);

            const vis = $(`#${config.rootDivId} #vis`)
            vis.empty();
            vis.attr("height", config.divHeight);
            config.svg = d3.select(`#${config.rootDivId} #vis`)
                .append('svg')
                .attr("width", DIV_WIDTH)
                .attr("height", config.divHeight)
                .attr("fill", getBackgroundColor());

            renderAxisLabels();

            var i;
            var j;
            for (i = 0; i < config.numLayers; i++) {
                for (j = 0; j < config.numHeads; j++) {
                    renderThumbnail(i, j);
                }
            }
        }

        function renderAxisLabels() {
            const axisSize = HEADING_TEXT_SIZE + HEADING_PADDING + TEXT_SIZE + TEXT_PADDING;
            const tableWidth = config.thumbnailWidth * config.heads.length;
            config.svg.append("text")
                .text("Heads")
                .attr("fill", "black")
                .attr("font-weight", "bold")
                .attr("font-size", HEADING_TEXT_SIZE + "px")
                .attr("x", axisSize + tableWidth / 2)
                .attr("text-anchor", "middle")
                .attr("y", 0)
                .attr("dy", HEADING_TEXT_SIZE);
            for (let i = 0; i < config.numHeads; i++) {
                config.svg.append("text")
                    .text(config.heads[i])
                    .attr("fill", "black")
                    .attr("font-size", TEXT_SIZE + "px")
                    .attr("x", axisSize + (i + .5) * config.thumbnailWidth)
                    .attr("text-anchor", "middle")
                    .attr("y", HEADING_TEXT_SIZE + HEADING_PADDING)
                    .attr("dy", TEXT_SIZE);
            }
            let x = 0;
            let y = axisSize + config.thumbnailHeight * config.layers.length / 2;
            console.log("x", x, y)
            config.svg.append("text")
                .text("Layers")
                .attr("fill", "black")
                .attr("font-weight", "bold")
                .attr("transform", "rotate(270, " + x  + ", " + y + ")")
                .attr("font-size", HEADING_TEXT_SIZE + "px")
                .attr("x", x)
                .attr("text-anchor", "middle")
                .attr("y", y)
                .attr("dy", HEADING_TEXT_SIZE);
            for (let i = 0; i < config.numLayers; i++) {
                x = HEADING_TEXT_SIZE + HEADING_PADDING + TEXT_SIZE; // HACK
                y = axisSize + (i + .5) * config.thumbnailHeight;
                config.svg.append("text")
                    .text(config.layers[i])
                    .attr("fill", "black")
                    .attr("font-size", TEXT_SIZE + "px")
                    .attr("x", x)
                    .attr("text-anchor", "end")
                    .attr("y", y)
                    .attr("dy", TEXT_SIZE / 2);
            }
        }


        function renderThumbnail(layerIndex, headIndex) {
            const axisSize = HEADING_TEXT_SIZE + HEADING_PADDING + TEXT_SIZE + TEXT_PADDING
            const x = headIndex * config.thumbnailWidth + axisSize;
            const y = layerIndex * config.thumbnailHeight + axisSize;
            renderThumbnailAttn(x, y, config.attn[layerIndex][headIndex], layerIndex, headIndex);
        }

        function renderDetail(att, layerIndex, headIndex) {
            const axisSize = TEXT_SIZE + HEADING_PADDING + TEXT_SIZE + TEXT_PADDING;
            var xOffset = .8 * config.thumbnailWidth;
            var maxX = DIV_WIDTH;
            var maxY = config.divHeight - 3;
            var leftPos = axisSize + headIndex * config.thumbnailWidth;
            var x = leftPos + THUMBNAIL_PADDING + xOffset;
            if (x < MIN_X) {
                x = MIN_X;
            } else if (x + DETAIL_WIDTH > maxX) {
                x = leftPos + THUMBNAIL_PADDING - DETAIL_WIDTH + 8;
            }
            var posLeftText = x;
            var posAttention = posLeftText + DETAIL_BOX_WIDTH;
            var posRightText = posAttention + DETAIL_ATTENTION_WIDTH;
            var thumbnailHeight = Math.max(config.leftText.length, config.rightText.length) * config.thumbnailBoxHeight + 2 * THUMBNAIL_PADDING;
            var yOffset = 20;
            var y = layerIndex * thumbnailHeight + THUMBNAIL_PADDING + yOffset;
            if (y < MIN_Y) {
                y = MIN_Y;
            } else if (y + config.detailHeight > maxY) {
                y = maxY - config.detailHeight;
            }
            renderDetailFrame(x, y, layerIndex);
            y = y + DETAIL_PADDING;
            renderDetailHeading(x, y, layerIndex, headIndex);
            y = y + DETAIL_HEADING_HEIGHT;
            renderDetailText(config.leftText, "leftText", posLeftText, y , layerIndex);
            renderDetailAttn(posAttention, y, att, layerIndex, headIndex);
            renderDetailText(config.rightText, "rightText", posRightText, y, layerIndex);
        }

        function renderDetailHeading(x, y, layerIndex, headIndex) {
            var fillColor = getTextColor();
            config.svg.append("text")
                .classed("detail", true)
                .text('Layer ' + config.layers[layerIndex] + ", Head " + config.heads[headIndex])
                .attr("font-size", TEXT_SIZE + "px")
                .attr("font-weight", "bold")
                .style("cursor", "default")
                .style("-webkit-user-select", "none")
                .attr("fill", fillColor)
                .attr("x", x + DETAIL_WIDTH / 2)
                .attr("text-anchor", "middle")
                .attr("y", y)
                .attr("height", DETAIL_HEADING_HEIGHT)
                .attr("width", DETAIL_WIDTH)
                .attr("dy", HEADING_TEXT_SIZE);
        }

        function renderDetailText(text, id, x, y, layerIndex) {
            var tokenContainer = config.svg.append("svg:g")
                .classed("detail", true)
                .selectAll("g")
                .data(text)
                .enter()
                .append("g");

            var fillColor = getTextColor();

            tokenContainer.append("rect")
                .classed("highlight", true)
                .attr("fill", fillColor)
                .style("opacity", 0.0)
                .attr("height", DETAIL_BOX_HEIGHT)
                .attr("width", DETAIL_BOX_WIDTH)
                .attr("x", x)
                .attr("y", function (d, i) {
                    return y + i * DETAIL_BOX_HEIGHT;
                });

            var textContainer = tokenContainer.append("text")
                .classed("token", true)
                .text(function (d) {
                    return d;
                })
                .attr("font-size", TEXT_SIZE + "px")
                .style("cursor", "default")
                .style("-webkit-user-select", "none")
                .attr("fill", fillColor)
                .attr("x", x)
                .attr("y", function (d, i) {
                    return i * DETAIL_BOX_HEIGHT + y;
                })
                .attr("height", DETAIL_BOX_HEIGHT)
                .attr("width", DETAIL_BOX_WIDTH)
                .attr("dy", TEXT_SIZE);

            if (id == "leftText") {
                textContainer.style("text-anchor", "end")
                    .attr("dx", DETAIL_BOX_WIDTH - 2);
                tokenContainer.on("mouseover", function (d, index) {
                    highlightSelection(index);
                });
                tokenContainer.on("mouseleave", function () {
                    unhighlightSelection();
                });
            }
        }

        function highlightSelection(index) {
            config.svg.select("#leftText")
                .selectAll(".highlight")
                .style("opacity", function (d, i) {
                    return i == index ? 1.0 : 0.0;
                });
            config.svg.selectAll(".attn-line-group")
                .style("opacity", function (d, i) {
                    return i == index ? 1.0 : 0.0;
                });
        }

        function unhighlightSelection() {
            config.svg.select("#leftText")
                .selectAll(".highlight")
                .style("opacity", 0.0);
            config.svg.selectAll(".attn-line-group")
                .style("opacity", 1);
        }

        function renderThumbnailAttn(x, y, att, layerIndex, headIndex) {

            var attnContainer = config.svg.append("svg:g");

            var attnBackground = attnContainer.append("rect")
                .attr("id", 'attn_background_' + layerIndex + "_" + headIndex)
                .classed("attn_background", true)
                .attr("x", x)
                .attr("y", y)
                .attr("height", config.thumbnailHeight)
                .attr("width", config.thumbnailWidth)
                .attr("stroke-width", 2)
                .attr("stroke", getLayerColor(layerIndex))
                .attr("stroke-opacity", 0)
                .attr("fill", getBackgroundColor());
            var x1 = x + THUMBNAIL_PADDING;
            var x2 = x1 + config.thumbnailWidth - 14;
            var y1 = y + THUMBNAIL_PADDING;

            attnContainer.selectAll("g")
                .data(att)
                .enter()
                .append("g") // Add group for each source token
                .attr("source-index", function (d, i) { // Save index of source token
                    return i;
                })
                .selectAll("line")
                .data(function (d) { // Loop over all target tokens
                    return d;
                })
                .enter() // When entering
                .append("line")
                .attr("x1", x1)
                .attr("y1", function (d) {
                    var sourceIndex = +this.parentNode.getAttribute("source-index");
                    return y1 + (sourceIndex + .5) * config.thumbnailBoxHeight;
                })
                .attr("x2", x2)
                .attr("y2", function (d, targetIndex) {
                    return y1 + (targetIndex + .5) * config.thumbnailBoxHeight;
                })
                .attr("stroke-width", 2.2)
                .attr("stroke", getLayerColor(layerIndex))
                .attr("stroke-opacity", function (d) {
                    return d;
                });

            var clickRegion = attnContainer.append("rect")
                .attr("x", x)
                .attr("y", y)
                .attr("height", config.thumbnailHeight)
                .attr("width", config.thumbnailWidth)
                .style("opacity", 0);

            clickRegion.on("click", function (d, index) {
                var attnBackgroundOther = config.svg.selectAll(".attn_background");
                attnBackgroundOther.attr("fill", getBackgroundColor());
                attnBackgroundOther.attr("stroke-opacity", 0);

                config.svg.selectAll(".detail").remove();
                if (config.detail_layer != layerIndex || config.detail_head != headIndex) {
                    renderDetail(att, layerIndex, headIndex);
                    config.detail_layer = layerIndex;
                    config.detail_head = headIndex;
                    attnBackground.attr("fill", getHighlightColor());
                    attnBackground.attr("stroke-opacity", .8);
                } else {
                    config.detail_layer = null;
                    config.detail_head = null;
                    attnBackground.attr("fill", getBackgroundColor());
                    attnBackground.attr("stroke-opacity", 0);
                }
            });

            clickRegion.on("mouseover", function (d) {
                d3.select(this).style("cursor", "pointer");
            });
        }

        function renderDetailFrame(x, y, layerIndex) {
            var detailFrame = config.svg.append("rect")
                .classed("detail", true)
                .attr("x", x)
                .attr("y", y)
                .attr("height", config.detailHeight)
                .attr("width", DETAIL_WIDTH)
                .style("opacity", 1)
                .attr("stroke-width", 1.5)
                .attr("stroke-opacity", 0.7)
                .attr("stroke", getLayerColor(layerIndex));
        }

        function renderDetailAttn(x, y, att, layerIndex) {
            var attnContainer = config.svg.append("svg:g")
                .classed("detail", true)
                .attr("pointer-events", "none");
            attnContainer.selectAll("g")
                .data(att)
                .enter()
                .append("g") // Add group for each source token
                .classed('attn-line-group', true)
                .attr("source-index", function (d, i) { // Save index of source token
                    return i;
                })
                .selectAll("line")
                .data(function (d) { // Loop over all target tokens
                    return d;
                })
                .enter()
                .append("line")
                .attr("x1", x + ATTN_PADDING)
                .attr("y1", function (d) {
                    var sourceIndex = +this.parentNode.getAttribute("source-index");
                    return y + (sourceIndex + .5) * DETAIL_BOX_HEIGHT;
                })
                .attr("x2", x + DETAIL_ATTENTION_WIDTH - ATTN_PADDING)
                .attr("y2", function (d, targetIndex) {
                    return y + (targetIndex + .5) * DETAIL_BOX_HEIGHT;
                })
                .attr("stroke-width", 2.2)
                .attr("stroke", getLayerColor(layerIndex))
                .attr("stroke-opacity", function (d) {
                    return d;
                });
        }

        function getLayerColor(layer) {
          return LAYER_COLORS[config.layers[layer] % 10];
        }

        function getTextColor() {
            return PALETTE[config.mode]['text']
        }

        function getBackgroundColor() {
           return PALETTE[config.mode]['background']
        }

        function getHighlightColor() {
           return PALETTE[config.mode]['highlight']
        }

        function initialize() {
            config.attention = params['attention'];
            config.filter = params['default_filter'];
            config.mode = params['display_mode'];
            config.layers = params['include_layers']
            config.heads = params['include_heads']
            config.totalHeads = params['total_heads']
            config.rootDivId = params['root_div_id'];
            $(`#${config.rootDivId} #filter`).on('change', function (e) {
                config.filter = e.currentTarget.value;
                render();
            });
        }

        initialize();
        render();

    });
</script>
